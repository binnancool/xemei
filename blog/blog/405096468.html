<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>Linux vsFTPD安装与配置</title></head><body><h1>Linux vsFTPD安装与配置</h1><div><p></p>
<li><strong><span class="fa"><span style="COLOR: #cc0000"><span style="FONT-SIZE: 18px">摘要</span>：</span></span></strong>vsftpd.conf是Linux vsFTPD服务器的配置文件，此文件一般是/etc/vsftpd.conf或 /etc/vsftpd/vsftpd.conf，vsftpd.conf配置文件就是Linux vsFTPD服务器的全局控制文件，此配置文件中，每行应该算做一 个规则。配置完后需要重启才有效。 </li>
<p class="m_l_cont_text"><span style="COLOR: #0e60ac"></span>
<p class="m_l_cont_text">Linux vsFTPD是一款小巧易用FTP服务器程序，是一款在Linux发行版中最受推崇的FTP服务器程序，特点是小巧轻快，安全易用。</p>
<p class="m_l_cont_text"><strong><span style="FONT-SIZE: 18px">Linux vsFTPD的安装</span></strong></p>
<p class="m_l_cont_text">在最新的各大发行版中的安装盘中都有Linux vsFTPD的软件包，用相应发行版提供的软件包管理工具就能安装。当然也可以到各大发行版的FTP镜像中找到Linux vsFTPD的软件包，用软件包的管理工具在线安装。推荐用发行版提供的软件来安装，不推荐自己编译源码包的安装方式。Fedora 或Redhat 系统，可以用下面的命令在线安装；</p>
<div class="m_l_cont_text">
<ol class="dp-xml">
<li class="alt"><span><span>[root@localhost ~]# yum install vsftpd&nbsp; </span></span></li></ol></div>
<p class="alt"><span><span></span></span><span>如果是debian 类系统，可以用apt 来在线安装；&nbsp; </span></p>
<ol class="dp-xml">
<li class="alt"><span>[root@localhost ~]# apt-get install vsftpd </span></li></ol>
<p><span>如果是RPM的系统，也可以找到vsftpd-xxxx.rpm 的包来通过rpm命令来安装； </span></p>
<ol class="dp-xml">
<li class="alt"><span>[root@localhost ~]# rpm -ivh vsftpd*.rpm </span></li></ol>
<p><span>下载源码包安装 </span></p>
<ol class="dp-xml">
<li class="alt"><span>[root@localhost ~]# tar zxvf vsftpd-2.0.3.tar.gz </span>
<li><span>[root@localhost ~]# cd vsftpd-2.0.3 </span>
<li class="alt"><span>[root@localhost ~]# make ;make install </span>
<li><span>[root@localhost ~]# cp vsftpd.conf /etc </span>
<li class="alt"><span>然后修改/etc/vsftpd.conf ，在配置文件的最后一行加入下面一行；</span>listen=yes</li></ol>
<p>源码包安装的方法，如果您的系统是RPM包管理的系统，可以删除/etc/xinetd.d/vsftpd 这个文件；然后启动xinetd 服务器；</p><pre><ol class="dp-xml"><li class="alt"><span><span>[root@localhost ~]# /etc/init.d/xinetd restart  </span></span><li><span>停止 xinetd： [ 确定 ]  </span><li class="alt"><span>启动 xinetd： [ 确定 ]  </span><li><span>vsFTPd服务器的运行  </span><li class="alt"><span>[root@localhost ~]# /usr/sbin/vsftpd &amp;  </span><li><span>[root@localhost ~]# /usr/local/sbin/vsftpd &amp;  </span><li class="alt"><span>vsFTPd 服务器关闭 </span></li></ol></pre>
<p>用pkill vsftpd 来杀死Linux vsFTPD进程，这样就把Linux vsFTPD关闭，用psgrep vsftpd 来查看进程，如果没有进程，证明Linux vsFTPD已经关掉；要用到root权限。</p><pre><ol class="dp-xml"><li class="alt"><span><span>[root@localhost ~]# pkill vsftpd  </span></span><li><span>[root@localhost ~]# pgrep vsftpd  </span><li class="alt"><span>在Fedora/Redhat/CentOS中vsFTPd 服务器的启动和关闭：  </span><li><span>在Fedora/Redhat/CentOS中，也可以用下面的方法来启动vsFTPd；当然也要用到root权限；  </span><li class="alt"><span>[root@localhost beinan]# /etc/init.d/vsftpd start  </span><li><span>为 vsftpd 启动 vsftpd： [ 确定 ]  </span><li class="alt"><span>重新启动vsFTPd用下面的命令；  </span><li><span>[root@localhost beinan]# /etc/init.d/vsftpd restart  </span><li class="alt"><span>关闭 vsftpd： [ 确定 ]  </span><li><span>为 vsftpd 启动 vsftpd： [ 确定 ]  </span><li class="alt"><span>关掉vsFTPd服务器，应该用下面的命令；  </span><li><span>[root@localhost beinan]# /etc/init.d/vsftpd stop  </span><li class="alt"><span>关闭 vsftpd： [ 确定 ] </span></li></ol></pre>
<p><strong>Linux vsFTPD配置文件</strong></p>
<p>vsftpd.conf是Linux vsFTPD服务器的配置文件，此文件一般是/etc/vsftpd.conf或 /etc/vsftpd/vsftpd.conf，vsftpd.conf配置文件就是Linux vsFTPD服务器的全局控制文件，此配置文件中，每行应该算做一 个规则。配置完后需要重启才有效。</p>
<p><strong>Linux vsFTPD配置虚拟用户</strong></p>
<p>FTP用户一般是不能登录系统的，这也是为了安全。在系统中，没有权限登录系统的用户一般也被称之为虚拟用户；虚拟用户也是要写进 /etc/passwd中；这只是一种虚拟用户的方法，但说实在的并不是真正的虚拟用户，只是把他登录SHELL的权限去掉了，所以他没有能力登录系统；如果我们想把beinan这个用户目录定位在/opt/beinan这个目录中，并且不能登录系统；我们应该如下操作。</p><pre><ol class="dp-xml"><li class="alt"><span><span>[root@localhost ~]# adduser -d /opt/beinan -g ftp -s /sbin/nologin beinan  </span></span><li><span>[root@localhost ~]# passwd beinan  </span><li class="alt"><span>Changing password for user beinan.  </span><li><span>New password:  </span><li class="alt"><span>Retype new password:  </span><li><span>passwd: all authentication tokens updated successfully.  </span><li class="alt"><span>[root@localhost ~]#  </span><li><span>其实这还是不够的，还要改一下配置文件vsftpd.conf ，以确保本地虚拟用户能有读写权限；  </span><li class="alt"><span> </span><li><span></span><span class="attribute"><span style="COLOR: #ff0000">local_enable</span></span><span>=</span><span class="attribute-value"><span style="COLOR: #0000ff">YES</span></span><span> </span><li class="alt"><span></span><span class="attribute"><span style="COLOR: #ff0000">write_enable</span></span><span>=</span><span class="attribute-value"><span style="COLOR: #0000ff">YES</span></span><span> </span><li><span></span><span class="attribute"><span style="COLOR: #ff0000">local_umask</span></span><span>=</span><span class="attribute-value"><span style="COLOR: #0000ff">022</span></span><span> </span><li class="alt"><span>如何实现虚拟路径？ </span></li></ol></pre>
<p>比如：</p><pre><ol class="dp-xml"><li class="alt"><span><span>/home/a 映射为 ftp://localhost/a  </span></span><li><span>/home/b/c 则为 ftp://localhost/c  </span><li class="alt"><span>可以通过如下的方法来实现。  </span><li><span>[root@localhost ~]# mount –bind [原有的目录] [新目录]  </span><li class="alt"><span>比如我的ftp的默认目录是/var/ftp，我想把/mnt/LinG/WinSoft文件夹，映射到/var/ftp目录中，我就如下操作 </span></li></ol></pre>
<p><strong>我们要先在/var/ftp目录中建一个目录</strong></p><pre><ol class="dp-xml"><li class="alt"><span><span>[root@localhost ~]# mkdir /var/ftp/WinSoft  </span></span><li><span>然后执行mount命令  </span><li class="alt"><span>[root@localhost ~]# mount –bind /mnt/LinG/WinSoft /var/ftp/WinSoft  </span><li><span>这样就OK了。 </span></li></ol></pre>
<p><strong>打开Linux vsFTPDv服务器的日志功能</strong></p>
<p>把下面xferlog_file前面的#号对掉，也就是把vsftp的log功能打开，这样我们就能在/var/log目录下查看vsftpd.log。这是vsFTP的日志功能，这对于我们来说是极为重要的。xferlog_file=/var/log/vsftpd.log如何让vsFTP服务器限制链接数，以及每个IP最大的链接数？应该改Linux vsFTPD服务器的配制文件vsftpd.conf，加入下面的两行：</p>
<ol class="dp-xml">
<li class="alt"><span><span class="attribute"><span style="COLOR: #ff0000">max_clients</span></span><span>=数字  </span></span>
<li><span></span><span class="attribute"><span style="COLOR: #ff0000">max_per_ip</span></span><span>=数字  </span>
<li class="alt"><span>举例：我想让我的vsFTP最大支持链接数为100个，每个IP，最多能支持5个链接，所以我应该在vsftpd.conf中加上如下的两行：  </span>
<li><span></span><span class="attribute"><span style="COLOR: #ff0000">max_clients</span></span><span>=</span><span class="attribute-value"><span style="COLOR: #0000ff">100</span></span><span> </span>
<li class="alt"><span></span><span class="attribute"><span style="COLOR: #ff0000">max_per_ip</span></span><span>=</span><span class="attribute-value"><span style="COLOR: #0000ff">5</span></span><span> </span>
<li><span>如何限制传输速度？  </span>
<li class="alt"><span></span><span class="attribute"><span style="COLOR: #ff0000">anon_max_rate</span></span><span>=数字  </span>
<li><span>注：这是匿名的速度  </span>
<li class="alt"><span></span><span class="attribute"><span style="COLOR: #ff0000">local_max_rate</span></span><span>=数字  </span>
<li><span>注：这是vsFTP服务器上本地用户的速度  </span>
<li class="alt"><span>注：这个数字的单位是byte，所以我们要计算一下。  </span>
<li><span>比如我想让匿名用户和vsFTP上的用户都以80KB下载，所以这个数字应该是1024×</span><span class="attribute"><span style="COLOR: #ff0000">80</span></span><span>=</span><span class="attribute-value"><span style="COLOR: #0000ff">81920</span></span><span> </span>
<li class="alt"><span>所以我们要在vsftpd.conf中加入下面的两行 </span>
<li class="alt">anon_max_rate=81920<br>local_max_rate=81920</li></ol>
<p>1. 直接去vsftpd网站（<a href="ftp://vsftpd.beasts.org/users/cevans/">ftp://vsftpd.beasts.org/users/cevans/</a>）下载最新的tar.gz格式源码包<br>2. #解压 $tar -zxf vsftpd-xx.tar.gz<br>&nbsp;&nbsp;&nbsp; $cd ./vsftpd-xx<br>&nbsp;&nbsp;&nbsp;&nbsp; #编译<br>&nbsp;&nbsp;&nbsp;&nbsp; make<br>&nbsp;&nbsp;&nbsp;&nbsp; make install<br>&nbsp;&nbsp;&nbsp;&nbsp; #如果make install没有安装文件,你可能需要手动执行下面的命令<br>&nbsp;&nbsp;&nbsp;&nbsp; cp vsftpd /usr/local/sbin/vsftpd<br>&nbsp;&nbsp;&nbsp;&nbsp; cp vsftpd.conf.5 /usr/local/share/man/man5<br>&nbsp;&nbsp;&nbsp;&nbsp; cp vsftpd.8 /usr/local/share/man/man8<br>&nbsp;&nbsp;&nbsp;&nbsp; cd ./EXAMPLE/INTERNET_SITE<br>&nbsp;&nbsp;&nbsp;&nbsp; cp vsftpd.conf /etc<br>&nbsp;&nbsp;&nbsp;&nbsp; cp vsfpd.xinetd /etc/xinetd.d/vsftpd<br>&nbsp;&nbsp;&nbsp;&nbsp; /etc/rc.d/init.d/xinetd restart 或者service xinetd restart<br>&nbsp;&nbsp;&nbsp;&nbsp; ######若无xinetd服务，则用命令 $yum install xinetd<br>3. 若要設置独立启动模式，则在/etc/xinetd.d/vsftpd文件中，把disable=no改成YES<br>并在/etc/vsftpd.conf文件中：<br>&nbsp; 添加listen=yes这样就改成了STANDALONE独立模式<br>4. 匿名登录配置：<br>&nbsp; 修改(若默認已是则不用修改) anonymous_enable=YES<br>&nbsp; anon_root=/sunwill&nbsp;&nbsp; #匿名登陆的目录<br>&nbsp; anon_no_anon_password=YES #不需要提示輸入密码 NO则提示輸入密码<br>&nbsp; 其他的属性如为文章最后部分的配置属性清单中（匿名一般含有anon），自己将有需要的添加或修改<br>6.本地用戶<br>&nbsp; 首先 cp RedHat/vsftpd.pam /etc/pam.d/ftp（拷贝本地用戶认证的pam文件，没有这一步将不能使用本地用户登录！）<br>&nbsp; 修改或添加：<br>&nbsp; local_enable=YES<br>　 write_enable=YES<br>　　local_umask=022<br>&nbsp; local_root=/sunwill #本地用戶登录默認目录，若没有该条则登录为本地用戶原来默認的目录，可用usermod来修改(usermod -d /dir user)。<br>7.虚拟用戶配置:<br>&nbsp; (1)．生成虚拟用户口令库文件。为了建立此口令库文件，先要生成一个文本文件。该文件的格式如下，单数行为用户名，偶数行为口令：<br>#vi account.txt<br>ylg<br>1234<br>zhanghong<br>4321<br>gou<br>5678<br>&nbsp; (2)．生成口令库文件，并修改其权限：</p>
<p>&nbsp; db_load -T -t hash -f ./account.txt /etc/vsftpd/account.db<br>&nbsp; chmod 600 /etc/vsftpd/account.db<br>（若要改变用戶请刪除account.db，然后再db_load）</p>
<p>若没有db_load 则可以从光盘中拷贝關于db4开头的几个rpm文件来安装(rpm -ivh *.rpm)。</p>
<p>&nbsp; 下载地址：<a href="http://download.fedora.redhat.com/pub/fedora/linux/core/6/i386/os/Fedora/RPMS/">http://download.fedora.redhat.com/pub/fedora/linux/core/6/i386/os/Fedora/RPMS/</a><br>&nbsp; 用命令$rpm -q db4 檢查，<br>&nbsp; 若已装，则下载db4-java-4.3.29-9.fc6.i386.rpm,<br>db4-tcl-4.3.29-9.fc6.i386.rpm,db4-utils-4.3.29-9.fc6.i386.rpm三个包，<br>&nbsp; 若db4未装则多下载db4-4.3.29-9.fc6.i386.rpm，db4-devel-4.3.29-9.fc6.i386.rpm两个软件包。用rpm -ivh *.rpm安装所下载的包<br>&nbsp; (3)．新建一个虚拟用户的PAM文件。加上如下两行内容：<br>&nbsp; #vi /etc/pam.d/vsftp.vu<br>&nbsp; auth required /lib/security/pam_userdb.so db=/etc/vsftpd/account<br>&nbsp; account required /lib/security/pam_userdb.so db=/etc/vsftpd/account<br>&nbsp; (4)．建立虚拟用户，设置该用户所要访问的目录，并设置虚拟用户访问的权限：<br>&nbsp; useradd -d /ftpsite virtual_user<br>&nbsp; chmod 777 /ftpsite&nbsp;&nbsp; ###允许所有用戶讀寫操作<br>&nbsp; 经过该步骤的设置，/ftpsite就是virtual_user用户的主目录，该用户也是/ftpsite目录的拥有者。<br>(5)在/etc/vsftpd.conf中添加<br>&nbsp; guest_enable=YES<br>&nbsp; guest_username=virtual_user<br>&nbsp; pam_service_name=vsftp.vu<br>(6) 到此为止已经可以用account.txt中的帐号密码登录ftp<br>&nbsp;&nbsp;&nbsp; 至于更改每个用戶的权限则需在vsftpd.conf中添加<br>&nbsp;&nbsp;&nbsp; user_config_dir=用户配置文件目录，如user_config_dir=/etc/vsftpd/ <br>先mkdir /etc/vsftpd<br>&nbsp;&nbsp;&nbsp; 然后在该目录下創建与用戶名同名的文件，如 $vi /etc/vsftpd/gou<br>&nbsp;&nbsp;&nbsp; 并添加权限属性，如下：<br>&nbsp;&nbsp;&nbsp; write_enable=NO&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #可写<br>&nbsp;&nbsp;&nbsp; anono_upload_enable=NO&nbsp;&nbsp; #可上传<br>&nbsp;&nbsp;&nbsp; 其他属性可以自己查看配置属性增加。<br>（7）启动ftp, /etc/local/sbin/vsftpd &amp;<br>(8) Linux下連接ftp 的命令: ftp 192.168.18.107 #以下为输入命令后的窗口信息<br>Connected to 127.0.0.1.<br>220 (vsFTPd 2.0.5)<br>530 Please login with USER and PASS.<br>530 Please login with USER and PASS.<br>KERBEROS_V4 rejected as an authentication type<br>Name (127.0.0.1:root): gou<br>331 Please specify the password.<br>Password:<br>230 Login successful. <br>Remote system type is UNIX.<br>Using binary mode to transfer files.<br>ftp&gt;<br>&nbsp; 显示如上则表示連接成功<br>8. 設置开机运行<br>&nbsp;&nbsp;&nbsp; （1）我们在前面將其設置为独立启动模式，若要开机运行则在/etc/vsftpd.conf 中的listen=YES 该为listen=NO或注释掉<br>&nbsp;&nbsp;&nbsp; （2）#vi /etc/xinetd.d/vsftpd<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 将disable=YES 改为disable=NO<br>&nbsp;&nbsp;&nbsp; （3）#service xinetd restart 此时可用ftp 127.0.0.1测试<br>9. ftp客户端的命令<br>&nbsp; FTP的命令行格式为：<br>ftp -v -d -i -n -g [主机名] ，其中<br>-v 显示远程服务器的所有响应信息；<br>-n 限制ftp的自动登录，即不使用；.n etrc文件；<br>-d 使用调试方式；<br>-g 取消全局文件名。<br>FTP使用的内部命令如下(中括号表示可选项):<br>&lt;1&gt;.![cmd[args]]：在本地机中执行交互shell，exit回到ftp环境，如：!ls*.zip<br>&lt;2&gt;.$ macro-ame[args]： 执行宏定义macro-name。<br>&lt;3&gt;.account[password]： 提供登录远程系统成功后访问系统资源所需的补充口令。<br>&lt;4&gt;.append local-file[remote-file]：将本地文件追加到远程系统主机，若未指定远程系统文件名，则使用本地文件名。<br>&lt;5&gt;.ascii：使用ascii类型传输方式。<br>&lt;6&gt;.bell：每个命令执行完毕后计算机响铃一次。<br>&lt;7&gt;.bin：使用二进制文件传输方式。<br>&lt;8&gt;.bye：退出ftp会话过程。<br>&lt;9&gt;.case：在使用mget时，将远程主机文件名中的大写转为小写字母。<br>&lt;10&gt;.cd remote-dir：进入远程主机目录。<br>&lt;11&gt;.cdup：进入远程主机目录的父目录。<br>&lt;12&gt;.chmod mode file-name：将远程主机文件file-name的存取方式设置为mode，<br>如：chmod 777 a.out。<br>&lt;13&gt;.close：中断与远程服务器的ftp会话(与open对应)。<br>&lt;14&gt;.cr：使用asscii方式传输文件时，将回车换行转换为回行。<br>&lt;15&gt;.delete remote-file：删除远程主机文件。<br>&lt;16&gt;.debug[debug-value]：设置调试方式， 显示发送至远程主机的每条命令，如：deb up 3，若设为0，表示取消debug。<br>&lt;17&gt;.dir[remote-dir][local-file]：显示远程主机目录，并将结果存入本地文件<br>&lt;18&gt;.disconnection：同close。<br>&lt;19&gt;.form format：将文件传输方式设置为format，缺省为file方式。<br>&lt;20&gt;.get remote-file[local-file]： 将远程主机的文件remote-file传至本地硬盘的local-file。<br>&lt;21&gt;.glob：设置mdelete，mget，mput的文件名扩展，缺省时不扩展文件名，同命令行的-g参数。<br>&lt;22&gt;.hash：每传输1024字节，显示一个hash符号(#)。<br>&lt;23&gt;.help[cmd]：显示ftp内部命令cmd的帮助信息，如：help get。<br>&lt;24&gt;.idle[seconds]：将远程服务器的休眠计时器设为[seconds]秒。<br>&lt;25&gt;.image：设置二进制传输方式(同binary)。<br>&lt;26&gt;.lcd[dir]：将本地工作目录切换至dir。<br>&lt;27&gt;.ls[remote-dir][local-file]：显示远程目录remote-dir， 并存入本地文件local-file。<br>&lt;28&gt;.macdef macro-name：定义一个宏，遇到macdef下的空行时，宏定义结束。<br>&lt;29&gt;.mdelete[remote-file]：删除远程主机文件。<br>&lt;30&gt;.mdir remote-files local-file：与dir类似，但可指定多个远程文件，<br>如 ：mdir *.o.*.zipoutfile 。<br>&lt;31&gt;.mget remote-files：传输多个远程文件。<br>&lt;32&gt;.mkdir dir-name：在远程主机中建一目录。<br>&lt;33&gt;.mls remote-file local-file：同nlist，但可指定多个文件名。<br>&lt;34&gt;.mode[modename]：将文件传输方式设置为modename， 缺省为stream方式。<br>&lt;35&gt;.modtime file-name：显示远程主机文件的最后修改时间。<br>&lt;36&gt;.mput local-file：将多个文件传输至远程主机。<br>&lt;37&gt;.newer file-name： 如果远程机中file-name的修改时间比本地硬盘同名文件的时间更近，则重传该文件。<br>&lt;38&gt;.nlist[remote-dir][local-file]：显示远程主机目录的文件清单，并存入本地硬盘的local-file。<br>&lt;39&gt;.nmap[inpattern outpattern]：设置文件名映射机制， 使得文件传输时，文件中的某些字符相互转换， 如：nmap $1.$2.$3[$1，$2].[$2，$3]，则传输文件a1.a2.a3时，文件名变为a1，a2。该命令特别适用于远程主机为非UNIX机的情况。<br>&lt;40&gt;.ntrans[inchars[outchars]]：设置文件名字符的翻译机制，如ntrans1R，则文件名LLL将变为RRR。<br>&lt;41&gt;.open host[port]：建立指定ftp服务器连接，可指定连接端口。<br>&lt;42&gt;.passive：进入被动传输方式。<br>&lt;43&gt;.prompt：设置多个文件传输时的交互提示。<br>&lt;44&gt;.proxy ftp-cmd：在次要控制连接中，执行一条ftp命令， 该命令允许连接两个ftp服务器，以在两个服务器间传输文件。第一条ftp命令必须为open，以首先建立两个服务器间的连接。<br>&lt;45&gt;.put local-file[remote-file]：将本地文件local-file传送至远程主机。<br>&lt;46&gt;.pwd：显示远程主机的当前工作目录。<br>&lt;47&gt;.quit：同bye，退出ftp会话。<br>&lt;48&gt;.quote arg1，arg2...：将参数逐字发至远程ftp服务器，如：quote syst.<br>&lt;49&gt;.recv remote-file[local-file]：同get。<br>&lt;50&gt;.reget remote-file[local-file]：类似于get，但若local-file存在，则从上次传输中断处续传。<br>&lt;51&gt;.rhelp[cmd-name]：请求获得远程主机的帮助。<br>&lt;52&gt;.rstatus[file-name]：若未指定文件名，则显示远程主机的状态， 否则显示文件状态。<br>&lt;53&gt;.rename[from][to]：更改远程主机文件名。<br>&lt;54&gt;.reset：清除回答队列。<br>&lt;55&gt;.restart marker：从指定的标志marker处，重新开始get或put，如：restart 130。<br>&lt;56&gt;.rmdir dir-name：删除远程主机目录。<br>&lt;57&gt;.runique：设置文件名只一性存储，若文件存在，则在原文件后加后缀.1， .2等。<br>&lt;58&gt;.send local-file[remote-file]：同put。<br>&lt;59&gt;.sendport：设置PORT命令的使用。<br>&lt;60&gt;.site arg1，arg2...：将参数作为SITE命令逐字发送至远程ftp主机。<br>&lt;61&gt;.size file-name：显示远程主机文件大小，如：site idle 7200。<br>&lt;62&gt;.status：显示当前ftp状态。<br>&lt;63&gt;.struct[struct-name]：将文件传输结构设置为struct-name， 缺省时使用stream结构。<br>&lt;64&gt;.sunique：将远程主机文件名存储设置为只一(与runique对应)。<br>&lt;65&gt;.system：显示远程主机的操作系统类型。<br>&lt;66&gt;.tenex：将文件传输类型设置为TENEX机的所需的类型。<br>&lt;67&gt;.tick：设置传输时的字节计数器。<br>&lt;68&gt;.trace：设置包跟踪。<br>&lt;69&gt;.type[type-name]：设置文件传输类型为type-name，缺省为ascii，如:type binary，设置二进制传输方式。<br>&lt;70&gt;.umask[newmask]：将远程服务器的缺省umask设置为newmask，如：umask 3<br>&lt;71&gt;.user user-name[password][account]：向远程主机表明自己的身份，需要口令时，必须输入口令，如：user anonymous <a href="mailto:my@email">my@email</a>。<br>&lt;72&gt;.verbose：同命令行的-v参数，即设置详尽报告方式，ftp 服务器的所有响 应都将显示给用户，缺省为on.</p>
<p>&nbsp;</p>
<p><br>－－－－－－－－－－－vsftpd.conf配置文件的属性－－－－－－－－－－－－－－<br>anonymous_enable=NO&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 禁用匿名用户<br>no_anon_password=YES&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 需要密码<br>anon_root=/var/ftp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 匿名用户的默认主目录<br>local_enable=NO&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 禁用本地用户<br>local_root=webdisk&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 本地用户的主目录（相对路径是相对于用户的家目录，绝对路径是所有用户都只能登录到这个目录下比如：/localftp）<br>guest_enable=NO&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 禁用gust用户<br>ftp_username=ftp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 匿名用户的用户名（默认还有anonymous可使用）</p>
<p>权限控制</p>
<p>write_enable=YES&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 本地用户可写<br>local_umask=022&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 上传文件的umask<br>file_open_mode=0666&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 使用文件的方式<br>anon_upload_enable=NO&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 匿名用户不可以上传<br>anon_mkdir_write_enable=NO&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 匿名用户不可以建目录等写操作<br>anon_other_write_enable=NO&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 匿名用户不可以做其他的写操作<br>anon_world_readable_only=YES&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 匿名用户可以读文件<br>#chown_uploads=YES&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 修改上传的文件的属主<br>#chown_username=ftpadmin&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 修改上传的文件的属主为XXX<br>ascii_upload_enable=NO&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 不使用ascii上传文件<br>ascii_download_enable=NO&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 不使用ascii下载文件</p>
<p>secure_chroot_dir=/usr/share/empty&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 默认值</p>
<p>超时控制<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>idle_session_timeout=600&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 空闲超时600秒<br>data_connection_timeout=120&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 传输超时120秒<br>accept_timeout=60&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; pasv模式等待时间60秒<br>connect_timeout=60&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; port模式等待时间60秒</p>
<p>服务控制</p>
<p>xferlog_enable=YES&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 启动日志功能<br>xferlog_std_format=YES&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 使用标准日志格式<br>xferlog_file=/var/log/vsftpd.log&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 日志默认的位置<br>pasv_enable=YES&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 启用被动模式<br>#port_enable=YES&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 启用主动模式<br>#注意此处pasv和port只能写一个，不能一个YES，另一个NO，要想让另一个不起作用，只能用#注释掉，否则会出错。<br>tcp_wrappers=YES&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 启用tcp_wrappers功能<br>nopriv_user=nobody&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 最低权限用户</p>
<p>listen=YES&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 使用standalone 模式（推荐的）</p>
<p>显示信息</p>
<p>ftpd_banner=welcome to ftp.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 登录时的欢迎信息<br>dirmessage_enable=YES&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 启动切换目录时提示目录信息的功能<br>message_file=.message&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 目录提示信息的内容文件</p>
<p><br>文件权限设置<br>chroot_list_enable=YES&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 启动用户目录限制功能<br>chroot_list_file=/etc/vsftpd/vsftpd.chroot_list&nbsp;&nbsp; 此文件中的用户不能改变到其他外层目录中。</p>
<p>userlist_enable=YES&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 启动用户限制功能<br>userlist_deny=YES&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; userlist文件中的用户禁止登录，NO的话则只有userlist中用户可以登录<br>userlist_file=/etc/vsftpd/vsftpd.user_list&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 禁止登录用户列表文件名和位置（可自定义）</p>
<p>user_config_dir=/etc/vsftpd/userconf/&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 对个别用户特殊设置的配置文件的目录（在此目录下建立对应“用户名”的文件，文件里写<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; write_enable=YES<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; anon_world_readable_only=NO<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; anon_upload_enable=YES<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; anon_mkdir_write_enable=YES<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; anon_other_write_enable=YES 等权限信息，此用户将有这里所写的权限）</p>
<p><br>连接选项<br>max_clients=100&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 最大连接数<br>max_per_ip=5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 每个ip最大连接数<br>connect_from_port_20=YES&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 启用20端口传输数据<br>#listen_address=192.168.0.2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 指定监听的ip地址，如果你有多个ip的话<br>listen_port=21&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 监听的端口号<br>ftp_data_port=20&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 数据传输端口号</p>
<p>pasv_max_port=40000&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 被动模式的端口号的上限（0为不限）<br>pasv_min_port=30000&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 被动模式的端口号的下限（0为不限）</p>
<p>数据传输速度</p>
<p>anon_max_rate=51200&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 匿名用户最大传输率<br>local_max_rate=5120000&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 本地用户最大传输率&nbsp;&nbsp; <br>－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－</p></div></body></html>