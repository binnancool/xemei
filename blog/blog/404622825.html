<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>Linux中chkconfig命令</title></head><body><h1>Linux中chkconfig命令</h1><div><p>chkconfig：<br>&nbsp;&nbsp;&nbsp; chkconfig命令主要用来更新（启动或停止）和查询系统服务的运行级信息。谨记chkconfig不是立即自动禁止或激活一个服务，它只是简单的改变了符号连接。<br>语法：<br>&nbsp;&nbsp;&nbsp; chkconfig --list [name]<br>&nbsp;&nbsp;&nbsp; chkconfig --add name<br>&nbsp;&nbsp;&nbsp; chkconfig --del name<br>&nbsp;&nbsp;&nbsp; chkconfig [--level levels] name &lt;on|off|reset&gt;<br>&nbsp;&nbsp;&nbsp; chkconfig [--level levels] name</p>
<p>&nbsp;&nbsp;&nbsp; chkconfig 没有参数运行时，显示用法。如果加上服务名，那么就检查这个服务是否在当前运行级启动。如果是，返回true，否则返回false。如果在服务名后面指定了on，off或者reset，那么chkconfi 会改变指定服务的启动信息。on和off分别指服务被启动和停止，reset指重置服务的启动信息，无论有问题的初始化脚本指定了什么。on和off开关，系统默认只对运行级3，4，5有效，但是reset可以对所有运行级有效。<br>&nbsp;&nbsp;&nbsp; --level选项可以指定要查看的运行级而不一定是当前运行级。<br>&nbsp;&nbsp;&nbsp; 需要说明的是，对于每个运行级，只能有一个启动脚本或者停止脚本。当切换运行级时，init不会重新启动已经启动的服务，也不会再次去停止已经停止的服务。</p>
<p>&nbsp;&nbsp;&nbsp; chkconfig --list ：显示所有运行级系统服务的运行状态信息（on或off）。如果指定了name，那么只显示指定的服务在不同运行级的状态。<br>&nbsp;&nbsp;&nbsp; chkconfig --add name：增加一项新的服务。chkconfig确保每个运行级有一项启动(S)或者杀死(K)入口。如有缺少，则会从缺省的init脚本自动建立。<br>&nbsp;&nbsp;&nbsp; chkconfig --del name：删除服务，并把相关符号连接从/etc/rc[0-6].d删除。<br>&nbsp;&nbsp;&nbsp; chkconfig [--level levels] name &lt;on|off|reset&gt;：设置某一服务在指定的运行级是被启动，停止还是重置。例如，要在3，4，5运行级停止nfs服务，则命令如下：<br>&nbsp;&nbsp;&nbsp; chkconfig --level 345 nfs off<br>运行级文件：<br>&nbsp;&nbsp;&nbsp; 每个被chkconfig管理的服务需要在对应的init.d下的脚本加上两行或者更多行的注释。第一行告诉chkconfig缺省启动的运行级以及启动和停止的优先级。如果某服务缺省不在任何运行级启动，那么使用 - 代替运行级。第二行对服务进行描述，可以用\ 跨行注释。<br>例如，random.init包含三行：<br># chkconfig: 2345 20 80<br># description: Saves and restores system entropy pool for \<br># higher quality random number generation.</p>
<p>附加介绍一下Linux系统的运行级的概念：<br>&nbsp;&nbsp;&nbsp; Linux中有多种运行级，常见的就是多用户的2，3，4，5 ，很多人知道5是运行X-Windows的级别，而0就是关机了。运行级的改变可以通过init命令来切换。例如，假设你要维护系统进入单用户状态，那么，可以使用init1来切换。在Linux的运行级的切换过程中，系统会自动寻找对应运行级的目录/etc/rc[0-6].d下的K和S开头的文件，按后面的数字顺序，执行这些脚本。对这些脚本的维护，是很繁琐的一件事情，Linux提供了chkconfig命令用来更新和查询不同运行级上的系统服务。</p>
<p><br>本文来自CSDN博客，转载请标明出处：<a href="http://blog.csdn.net/simon_dong618/archive/2007/04/29/1591498.aspx">http://blog.csdn.net/simon_dong618/archive/2007/04/29/1591498.aspx</a></p></div></body></html>