<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>Windows下配置Nginx+php+mysql</title><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- top1 -->
<ins class="adsbygoogle"
     style="display:inline-block;width:728px;height:90px"
     data-ad-client="ca-pub-3347102627476643"
     data-ad-slot="2352128818"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script></head><body><h1>Windows下配置Nginx+php+mysql</h1><div><p><strong>一、准备工作</strong></p>
<p><strong>1、下载nginx</strong></p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <a href="http://nginx.org/en/download.html">http://nginx.org/en/download.html</a></p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 以nginx-0.7.65.zip为例</p>
<p><strong>2、下载php</strong></p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <a href="http://cn.php.net/get/php-5.2.13-Win32.zip/from/this/mirror">http://cn.php.net/get/php-5.2.13-Win32.zip/from/this/mirror</a></p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; php-5.3.2-nts-Win32-VC9-x86.zip</p>
<p><strong>3、下载RunHiddenConsole</strong></p>
<p>&nbsp;&nbsp;&nbsp;&nbsp; <a href="http://blogbuildingu.com/files/RunHiddenConsole.zip">http://blogbuildingu.com/files/RunHiddenConsole.zip</a></p>
<p><strong>二、安装步骤</strong></p>
<p><strong>1、创建安装目录</strong></p>
<p>&nbsp;&nbsp;&nbsp;&nbsp; 在C盘创建两个目录nginx和php5，把nginx-0.7.65.zip解压到nginx文件中，把php-5.3.2-nts-Win32-VC9-x86.zip解压到php5文件夹中。将RunHiddenConsole.zip解压，将RunHiddenConsole.exe放到php5目录下。</p>
<p><strong>2、参数配置</strong></p>
<p>&nbsp;&nbsp; </p>
<p>&nbsp;&nbsp;<strong>&nbsp; 2.1 php配置</strong></p>
<p>&nbsp;&nbsp;&nbsp; 打开php5文件夹，找到php.ini-recommended,更名为php.ini 。用UltraEdit编辑。</p>
<p>&nbsp;&nbsp;&nbsp; <strong>找到; cgi.fix_pathinfo=1，去掉前面的;<br>&nbsp;&nbsp;&nbsp; 找到<br>&nbsp;&nbsp;&nbsp; ;extension=php_gd2.dll<br>&nbsp;&nbsp;&nbsp; ;extension=php_mysql.dll<br>&nbsp;&nbsp;&nbsp; ;extension=php_mysqli.dll</strong></p>
<p>&nbsp;&nbsp;&nbsp; 把前面的;去掉，这样就能支持gd图形、mysql数据库连接，如果需要其他的扩展功能，可以去掉对应的;</p>
<p>&nbsp;&nbsp;&nbsp; <strong>找到extension_dir 改为 extension_dir = "C:\php5\ext"。</strong></p>
<p>&nbsp;&nbsp;&nbsp; 将C:\php5添加到我的电脑环境变量path中。右键“我的电脑”=》“属性”=》“高级”=》“环境变量”=》“系统变量”=》双击&nbsp;&nbsp; “path”=&gt;添加“;C:\php5”。</p>
<p>&nbsp;&nbsp;&nbsp;<strong>2.2 Nginx配置</strong></p>
<p>&nbsp;&nbsp;&nbsp; 打开nginx文件下的conf,用UltraEdit编辑nginx.conf文件，</p>
<p>&nbsp;&nbsp;&nbsp; </p>
<p>#location ~ \.php$ {<br># root html;<br># fastcgi_pass 127.0.0.1:9000;<br># fastcgi_index index.php;<br># fastcgi_param SCRIPT_FILENAME /scripts$fastcgi_script_name;<br># include fastcgi_params;<br>#}</p>
<p>把里面的#去掉。并将/scripts替换为 $document_root<br>其中root可以随意指定你所要的目录，特别要注意和<br>location / {<br>root html;<br>index index.html index.htm;<br>}<br>里面的root保持一致。否则会出错。</p>
<p><strong>配置好的配置文件展示：</strong></p>
<p>view plaincopy to clipboardprint?<br>#user&nbsp; nobody;&nbsp;&nbsp; <br>worker_processes&nbsp; 1;&nbsp;&nbsp; <br>&nbsp; <br>error_log&nbsp; logs/error.log;&nbsp;&nbsp; <br>#error_log&nbsp; logs/error.log&nbsp; notice;&nbsp;&nbsp; <br>#error_log&nbsp; logs/error.log&nbsp; info;&nbsp;&nbsp; <br>&nbsp; <br>#pid&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; logs/nginx.pid;&nbsp;&nbsp; <br>&nbsp; <br>&nbsp; <br>events {&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; # 一个进程所处理的最大连接数上限，&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; # 本地开发，不需要默认的 1024，这里改为 64&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; worker_connections&nbsp; 64;&nbsp;&nbsp; <br>}&nbsp;&nbsp; <br>&nbsp; <br>&nbsp; <br>http {&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; include&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mime.types;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; default_type&nbsp; application/octet-stream;&nbsp;&nbsp; <br>&nbsp; <br>&nbsp;&nbsp;&nbsp; #log_format&nbsp; main&nbsp; '$remote_addr - $remote_user [$time_local] "$request" '&nbsp; <br>&nbsp;&nbsp;&nbsp; #&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; '$status $body_bytes_sent "$http_referer" '&nbsp; <br>&nbsp;&nbsp;&nbsp; #&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; '"$http_user_agent" "$http_x_forwarded_for"';&nbsp;&nbsp; <br>&nbsp; <br>&nbsp;&nbsp;&nbsp; #access_log&nbsp; logs/access.log&nbsp; main;&nbsp;&nbsp; <br>&nbsp; <br>&nbsp;&nbsp;&nbsp; sendfile&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; on;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; #tcp_nopush&nbsp;&nbsp;&nbsp;&nbsp; on;&nbsp;&nbsp; <br>&nbsp; <br>&nbsp;&nbsp;&nbsp; #keepalive_timeout&nbsp; 0;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; keepalive_timeout&nbsp; 65;&nbsp;&nbsp; <br>&nbsp; <br>&nbsp;&nbsp;&nbsp; #gzip&nbsp; on;&nbsp;&nbsp; <br>&nbsp; <br>&nbsp;&nbsp;&nbsp; server {&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; listen&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 80;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; server_name&nbsp; localhost;&nbsp;&nbsp; <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #charset koi8-r;&nbsp;&nbsp; <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #access_log&nbsp; logs/host.access.log&nbsp; main;&nbsp;&nbsp; <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; location / {&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; root&nbsp;&nbsp; html;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; index&nbsp; index.html index.htm;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # 3. 没有索引页时，罗列文件和子目录&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; autoindex on;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; autoindex_exact_size on;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; autoindex_localtime on;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }&nbsp;&nbsp; <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #error_page&nbsp; 404&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /404.html;&nbsp;&nbsp; <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # redirect server error pages to the static page /50x.html&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; error_page&nbsp;&nbsp; 500 502 503 504&nbsp; /50x.html;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; location = /50x.html {&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; root&nbsp;&nbsp; html;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }&nbsp;&nbsp; <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # proxy the PHP scripts to Apache listening on 127.0.0.1:80&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #location ~ \.php$ {&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #&nbsp;&nbsp;&nbsp; proxy_pass&nbsp;&nbsp; <a href="http://127.0.0.1/">http://127.0.0.1</a>;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #}&nbsp;&nbsp; <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; location ~ \.php$ {&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; html;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; fastcgi_pass&nbsp;&nbsp; 127.0.0.1:9000;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; fastcgi_index&nbsp; index.php;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; fastcgi_param&nbsp; SCRIPT_FILENAME&nbsp; $document_root$fastcgi_script_name;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # fastcgi_split_path_info&nbsp;&nbsp;&nbsp;&nbsp; ^(.+\.php)(.*)$;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # fastcgi_param PATH_INFO&nbsp;&nbsp;&nbsp;&nbsp; $fastcgi_path_info;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; include&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; fastcgi_params;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }&nbsp;&nbsp; <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # deny access to .htaccess files, if Apache's document root&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # concurs with nginx's one&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #location ~ /\.ht {&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #&nbsp;&nbsp;&nbsp; deny&nbsp; all;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #}&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; }&nbsp;&nbsp; <br>&nbsp; <br>&nbsp; <br>&nbsp;&nbsp;&nbsp; # another virtual host using mix of IP-, name-, and port-based configuration&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; #&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; #server {&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; #&nbsp;&nbsp;&nbsp; listen&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 8000;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; #&nbsp;&nbsp;&nbsp; listen&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; somename:8080;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; #&nbsp;&nbsp;&nbsp; server_name&nbsp; somename&nbsp; alias&nbsp; another.alias;&nbsp;&nbsp; <br>&nbsp; <br>&nbsp;&nbsp;&nbsp; #&nbsp;&nbsp;&nbsp; location / {&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; #&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; root&nbsp;&nbsp; html;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; #&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; index&nbsp; index.html index.htm;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; #&nbsp;&nbsp;&nbsp; }&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; #}&nbsp;&nbsp; <br>&nbsp; <br>&nbsp; <br>&nbsp;&nbsp;&nbsp; # HTTPS server&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; #&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; #server {&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; #&nbsp;&nbsp;&nbsp; listen&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 443;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; #&nbsp;&nbsp;&nbsp; server_name&nbsp; localhost;&nbsp;&nbsp; <br>&nbsp; <br>&nbsp;&nbsp;&nbsp; #&nbsp;&nbsp;&nbsp; ssl&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; on;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; #&nbsp;&nbsp;&nbsp; ssl_certificate&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cert.pem;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; #&nbsp;&nbsp;&nbsp; ssl_certificate_key&nbsp; cert.key;&nbsp;&nbsp; <br>&nbsp; <br>&nbsp;&nbsp;&nbsp; #&nbsp;&nbsp;&nbsp; ssl_session_timeout&nbsp; 5m;&nbsp;&nbsp; <br>&nbsp; <br>&nbsp;&nbsp;&nbsp; #&nbsp;&nbsp;&nbsp; ssl_protocols&nbsp; SSLv2 SSLv3 TLSv1;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; #&nbsp;&nbsp;&nbsp; ssl_ciphers&nbsp; ALL:!ADH:!EXPORT56:RC4+RSA:+HIGH:+MEDIUM:+LOW:+SSLv2:+EXP;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; #&nbsp;&nbsp;&nbsp; ssl_prefer_server_ciphers&nbsp;&nbsp; on;&nbsp;&nbsp; <br>&nbsp; <br>&nbsp;&nbsp;&nbsp; #&nbsp;&nbsp;&nbsp; location / {&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; #&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; root&nbsp;&nbsp; html;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; #&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; index&nbsp; index.html index.htm;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; #&nbsp;&nbsp;&nbsp; }&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; #}&nbsp;&nbsp; <br>&nbsp; <br>}&nbsp; <br>#user&nbsp; nobody;<br>worker_processes&nbsp; 1;</p>
<p>error_log&nbsp; logs/error.log;<br>#error_log&nbsp; logs/error.log&nbsp; notice;<br>#error_log&nbsp; logs/error.log&nbsp; info;</p>
<p>#pid&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; logs/nginx.pid;</p>
<p><br>events {<br>&nbsp;&nbsp;&nbsp; # 一个进程所处理的最大连接数上限，&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; # 本地开发，不需要默认的 1024，这里改为 64<br>&nbsp;&nbsp;&nbsp; worker_connections&nbsp; 64;<br>}</p>
<p><br>http {<br>&nbsp;&nbsp;&nbsp; include&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mime.types;<br>&nbsp;&nbsp;&nbsp; default_type&nbsp; application/octet-stream;</p>
<p>&nbsp;&nbsp;&nbsp; #log_format&nbsp; main&nbsp; '$remote_addr - $remote_user [$time_local] "$request" '<br>&nbsp;&nbsp;&nbsp; #&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; '$status $body_bytes_sent "$http_referer" '<br>&nbsp;&nbsp;&nbsp; #&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; '"$http_user_agent" "$http_x_forwarded_for"';</p>
<p>&nbsp;&nbsp;&nbsp; #access_log&nbsp; logs/access.log&nbsp; main;</p>
<p>&nbsp;&nbsp;&nbsp; sendfile&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; on;<br>&nbsp;&nbsp;&nbsp; #tcp_nopush&nbsp;&nbsp;&nbsp;&nbsp; on;</p>
<p>&nbsp;&nbsp;&nbsp; #keepalive_timeout&nbsp; 0;<br>&nbsp;&nbsp;&nbsp; keepalive_timeout&nbsp; 65;</p>
<p>&nbsp;&nbsp;&nbsp; #gzip&nbsp; on;</p>
<p>&nbsp;&nbsp;&nbsp; server {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; listen&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 80;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; server_name&nbsp; localhost;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #charset koi8-r;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #access_log&nbsp; logs/host.access.log&nbsp; main;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; location / {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; root&nbsp;&nbsp; html;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; index&nbsp; index.html index.htm;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # 3. 没有索引页时，罗列文件和子目录&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; autoindex on;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; autoindex_exact_size on;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; autoindex_localtime on;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #error_page&nbsp; 404&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /404.html;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # redirect server error pages to the static page /50x.html<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; error_page&nbsp;&nbsp; 500 502 503 504&nbsp; /50x.html;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; location = /50x.html {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; root&nbsp;&nbsp; html;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # proxy the PHP scripts to Apache listening on 127.0.0.1:80<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #location ~ \.php$ {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #&nbsp;&nbsp;&nbsp; proxy_pass&nbsp;&nbsp; <a href="http://127.0.0.1/">http://127.0.0.1</a>;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #}</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; location ~ \.php$ {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; html;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; fastcgi_pass&nbsp;&nbsp; 127.0.0.1:9000;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; fastcgi_index&nbsp; index.php;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; fastcgi_param&nbsp; SCRIPT_FILENAME&nbsp; $document_root$fastcgi_script_name;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # fastcgi_split_path_info&nbsp;&nbsp;&nbsp;&nbsp; ^(.+\.php)(.*)$;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # fastcgi_param PATH_INFO&nbsp;&nbsp;&nbsp;&nbsp; $fastcgi_path_info; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; include&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; fastcgi_params;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # deny access to .htaccess files, if Apache's document root<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # concurs with nginx's one<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #location ~ /\.ht {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #&nbsp;&nbsp;&nbsp; deny&nbsp; all;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #}<br>&nbsp;&nbsp;&nbsp; }</p>
<p><br>&nbsp;&nbsp;&nbsp; # another virtual host using mix of IP-, name-, and port-based configuration<br>&nbsp;&nbsp;&nbsp; #<br>&nbsp;&nbsp;&nbsp; #server {<br>&nbsp;&nbsp;&nbsp; #&nbsp;&nbsp;&nbsp; listen&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 8000;<br>&nbsp;&nbsp;&nbsp; #&nbsp;&nbsp;&nbsp; listen&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; somename:8080;<br>&nbsp;&nbsp;&nbsp; #&nbsp;&nbsp;&nbsp; server_name&nbsp; somename&nbsp; alias&nbsp; another.alias;</p>
<p>&nbsp;&nbsp;&nbsp; #&nbsp;&nbsp;&nbsp; location / {<br>&nbsp;&nbsp;&nbsp; #&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; root&nbsp;&nbsp; html;<br>&nbsp;&nbsp;&nbsp; #&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; index&nbsp; index.html index.htm;<br>&nbsp;&nbsp;&nbsp; #&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; #}</p>
<p><br>&nbsp;&nbsp;&nbsp; # HTTPS server<br>&nbsp;&nbsp;&nbsp; #<br>&nbsp;&nbsp;&nbsp; #server {<br>&nbsp;&nbsp;&nbsp; #&nbsp;&nbsp;&nbsp; listen&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 443;<br>&nbsp;&nbsp;&nbsp; #&nbsp;&nbsp;&nbsp; server_name&nbsp; localhost;</p>
<p>&nbsp;&nbsp;&nbsp; #&nbsp;&nbsp;&nbsp; ssl&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; on;<br>&nbsp;&nbsp;&nbsp; #&nbsp;&nbsp;&nbsp; ssl_certificate&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cert.pem;<br>&nbsp;&nbsp;&nbsp; #&nbsp;&nbsp;&nbsp; ssl_certificate_key&nbsp; cert.key;</p>
<p>&nbsp;&nbsp;&nbsp; #&nbsp;&nbsp;&nbsp; ssl_session_timeout&nbsp; 5m;</p>
<p>&nbsp;&nbsp;&nbsp; #&nbsp;&nbsp;&nbsp; ssl_protocols&nbsp; SSLv2 SSLv3 TLSv1;<br>&nbsp;&nbsp;&nbsp; #&nbsp;&nbsp;&nbsp; ssl_ciphers&nbsp; ALL:!ADH:!EXPORT56:RC4+RSA:+HIGH:+MEDIUM:+LOW:+SSLv2:+EXP;<br>&nbsp;&nbsp;&nbsp; #&nbsp;&nbsp;&nbsp; ssl_prefer_server_ciphers&nbsp;&nbsp; on;</p>
<p>&nbsp;&nbsp;&nbsp; #&nbsp;&nbsp;&nbsp; location / {<br>&nbsp;&nbsp;&nbsp; #&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; root&nbsp;&nbsp; html;<br>&nbsp;&nbsp;&nbsp; #&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; index&nbsp; index.html index.htm;<br>&nbsp;&nbsp;&nbsp; #&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; #}</p>
<p>}</p>
<p><strong>3、用命令行启动。</strong><br>随便找一个目录，桌面也可以，常用的即可。新建文本文件start_nginx.bat批处理文件来启动nginx和php。</p>
<p>RunHiddenConsole.exe 是一个用来隐藏 DOS 窗口的小程序，可以在这里下载。</p>
<p><strong><span style="COLOR: #ff0000">内容如下:</span></strong></p>
<p><strong><a href="mailto:@echo">@echo</a> off<br>REM Windows 下无效<br>REM set PHP_FCGI_CHILDREN=5</strong></p>
<p><strong>REM 每个进程处理的最大请求数，或设置为 Windows 环境变量<br>set PHP_FCGI_MAX_REQUESTS=1000</strong></p>
<p><strong>echo Starting PHP FastCGI…<br>D:/cms/php-5.3.6/RunHiddenConsole.exe D:/cms/php-5.3.6/php-cgi.exe -b 127.0.0.1:9000 -c&nbsp; D:/cms/php-5.3.6/php.ini</strong></p>
<p><strong>echo Starting nginx…<br>cd D:/cms/nginx-0.8.54<br>nginx.exe</strong></p>
<p><strong>#pause</strong></p>
<p><br><strong><span style="COLOR: #ff0000">同样 stop_nginx.bat，用来关闭：</span></strong><br><strong>@echo off<br>echo Stopping nginx…<br>taskkill /F /IM nginx.exe &gt; nul<br>echo Stopping PHP FastCGI…<br>taskkill /F /IM php-cgi.exe &gt; nul</strong></p>
<p><strong>#pause</strong></p>
<p>4、测试。</p>
<p>在c:\nginx\html下编写test.php</p>
<p>view plaincopy to clipboardprint?<br>&lt;?php&nbsp;&nbsp; <br>echo phpinfo();&nbsp;&nbsp; <br>?&gt;&nbsp; </p></div></body></html>