<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>Openfire源代码在Eclipse3.5.2中的部署、编译、运行、配置安装之一</title></head><body><h1>Openfire源代码在Eclipse3.5.2中的部署、编译、运行、配置安装之一</h1><div><h1 style="margin: 17pt 0cm 16.5pt"><span >一、准备工作</span><span style="line-height: 240%; font-size: 14pt"></span></h1>
<h2 style="margin: 13pt 0cm"><span style="line-height: 173%; font-size: 10.5pt">1</span><span style="line-height: 173%;  font-size: 10.5pt; mso-ascii-">、到官方网站下载：</span><span style="line-height: 173%; font-size: 10.5pt">Openfire</span><span style="line-height: 173%;  font-size: 10.5pt; mso-ascii-">（版本</span><st1:chsdate isrocdate="False" islunardate="False" day="30" month="12" year="1899"><span style="line-height: 173%; font-size: 10.5pt">3.6.4</span></st1:chsdate><span style="line-height: 173%;  font-size: 10.5pt; mso-ascii-">）、</span><span style="line-height: 173%; font-size: 10.5pt">Spark</span><span style="line-height: 173%;  font-size: 10.5pt; mso-ascii-">（版本</span><span style="line-height: 173%; font-size: 10.5pt">2.5.8</span><span style="line-height: 173%;  font-size: 10.5pt; mso-ascii-">）、</span><span style="line-height: 173%; font-size: 10.5pt">Smack</span><span style="line-height: 173%;  font-size: 10.5pt; mso-ascii-">（版本</span><span style="line-height: 173%; font-size: 10.5pt">3.1.0</span><span style="line-height: 173%;  font-size: 10.5pt; mso-ascii-">），其中</span><span style="line-height: 173%; font-size: 10.5pt">Spark</span><span style="line-height: 173%;  font-size: 10.5pt; mso-ascii-">只能使用</span><span style="line-height: 173%; font-size: 10.5pt">SVN</span><span style="line-height: 173%;  font-size: 10.5pt; mso-ascii-">下载，源码的文件夹分别对应</span><span style="line-height: 173%; font-size: 10.5pt">Openfire</span><span style="line-height: 173%;  font-size: 10.5pt; mso-ascii-">、</span><span style="line-height: 173%; font-size: 10.5pt">Spark</span><span style="line-height: 173%;  font-size: 10.5pt; mso-ascii-">和</span><span style="line-height: 173%; font-size: 10.5pt">Smack</span><span style="line-height: 173%;  font-size: 10.5pt; mso-ascii-">。</span><span style="line-height: 173%; font-size: 10.5pt"></span></h2>
<h2 style="margin: 13pt 0cm"><span style="line-height: 173%; font-size: 10.5pt">2</span><span style="line-height: 173%;  font-size: 10.5pt; mso-ascii-">、网址：</span><span style="line-height: 173%; font-size: 10.5pt"><a href="http://www.igniterealtime.org/downloads/source.jsp"><span style="color: windowtext; text-decoration: none; ">http://www.igniterealtime.org/downloads/source.jsp</span></a></span><span style="line-height: 173%;  font-size: 10.5pt; mso-ascii-">，界面显示如下图：</span></h2>
<h2 style="margin: 13pt 0cm"><span style="line-height: 173%; font-size: 10.5pt"><span><span><img class="blogimg" border="0" small="0" src="http://hiphotos.baidu.com/dd_taiyangxue/pic/item/ceeb832b258cba7b5243c1b5.jpg"><br>
</span><br>
</span></span></h2>
<p style="text-align: center; margin: 0cm 0cm 0pt" class="MsoNormal" align="center"><span></span></p>
<h1 style="margin: 17pt 0cm 16.5pt"><span >二、创建</span><span style="line-height: 240%; font-size: 14pt"><font face="Times New Roman">Java Project</font></span><span >项目&mdash;&mdash;</span><span style="line-height: 240%; font-size: 14pt"><font face="Times New Roman">Openfire</font></span></h1>
<h2 style="margin: 13pt 0cm"><span style="line-height: 173%; font-size: 10.5pt">1</span><span style="line-height: 173%;  font-size: 10.5pt; mso-ascii-">、使用</span><span style="line-height: 173%; font-size: 10.5pt">Eclipse-<st1:chsdate isrocdate="False" islunardate="False" day="30" month="12" year="1899">3.5.2</st1:chsdate></span></h2>
<h2 style="margin: 13pt 0cm"><span style="line-height: 173%; font-size: 10.5pt">2</span><span style="line-height: 173%;  font-size: 10.5pt; mso-ascii-">、选择</span><span style="line-height: 173%; font-size: 10.5pt">File&mdash;&mdash;New&mdash;&mdash;Project&mdash;&mdash;Java Project</span><span style="line-height: 173%;  font-size: 10.5pt; mso-ascii-">。输入项目工程名</span><span style="line-height: 173%; font-size: 10.5pt">Openfire</span><span style="line-height: 173%;  font-size: 10.5pt; mso-ascii-">，</span><span style="line-height: 173%; font-size: 10.5pt">Contents</span><span style="line-height: 173%;  font-size: 10.5pt; mso-ascii-">中选择</span><span style="line-height: 173%; font-size: 10.5pt"> &quot;Create project from existiing source&quot;,</span><span style="line-height: 173%;  font-size: 10.5pt; mso-ascii-">然后把</span><span style="line-height: 173%; font-size: 10.5pt">Openfire</span><span style="line-height: 173%;  font-size: 10.5pt; mso-ascii-">文件所在的文件夹加进去。如下图所示：</span></h2>
<h2 style="margin: 13pt 0cm"><span style="line-height: 173%; font-size: 10.5pt"><span><img class="blogimg" border="0" small="0" src="http://hiphotos.baidu.com/dd_taiyangxue/pic/item/f2820001f895fdc4e850cd03.jpg"><br>
</span></span></h2>
<p style="margin: 0cm 0cm 0pt" class="MsoNormal"> </p>
<h2 style="margin: 13pt 0cm"><span style="line-height: 173%; font-size: 10.5pt">3</span><span style="line-height: 173%;  font-size: 10.5pt; mso-ascii-">、点击&ldquo;</span><span style="line-height: 173%; font-size: 10.5pt">Finish</span><span style="line-height: 173%;  font-size: 10.5pt; mso-ascii-">&rdquo;，完成。</span><span style="line-height: 173%; font-size: 10.5pt"></span></h2>
<h2 style="margin: 13pt 0cm"><span style="line-height: 173%; font-size: 10.5pt">4</span><span style="line-height: 173%;  font-size: 10.5pt; mso-ascii-">、在</span><span style="line-height: 173%; font-size: 10.5pt">Eclipse</span><span style="line-height: 173%;  font-size: 10.5pt; mso-ascii-">的</span><span style="line-height: 173%; font-size: 10.5pt">Package Explorer</span><span style="line-height: 173%;  font-size: 10.5pt; mso-ascii-">中的显示如下图所示：</span></h2>
<h2 style="margin: 13pt 0cm"><span style="line-height: 173%; font-size: 10.5pt"><span><img class="blogimg" border="0" small="0" src="http://hiphotos.baidu.com/dd_taiyangxue/pic/item/2dc0b409f29ccd9263d9860d.jpg"><br>
</span></span></h2>
<p style="text-align: center; margin: 0cm 0cm 0pt" class="MsoNormal" align="center"> </p>
<h1 style="margin: 17pt 0cm 16.5pt"><a name="_三,生成,编译,运行Openfire"></a><span >三、生成、编译、运行</span><span style="line-height: 240%; font-size: 14pt"><font face="Times New Roman">Openfire</font></span></h1>
<h2 style="margin: 13pt 0cm"><span style="line-height: 173%; font-size: 10.5pt">1</span><span style="line-height: 173%;  font-size: 10.5pt; mso-ascii-">、生成</span><span style="line-height: 173%; font-size: 10.5pt">Openfire</span></h2>
<p style="text-indent: 18pt; margin: 0cm 0cm 0pt 21pt" class="MsoNormal"><span><font face="Times New Roman">1.1</font></span><span >点击</span><span><font face="Times New Roman">Window</font></span><span >&mdash;&mdash;</span><span><font face="Times New Roman">Show View</font></span><span >&mdash;&mdash;</span><span><font face="Times New Roman">Ant</font></span><span >；</span></p>
<p style="text-indent: 18pt; margin: 0cm 0cm 0pt 21pt" class="MsoNormal"><span><font face="Times New Roman">1.2</font></span><span >右击</span><span><font face="Times New Roman">Ant</font></span><span >面板</span><span><font face="Times New Roman">,</font></span><span >选择</span><span><font face="Times New Roman">Add Buildfiles</font></span><span >；</span></p>
<p style="text-indent: 18pt; margin: 0cm 0cm 0pt 21pt" class="MsoNormal"><span><font face="Times New Roman">1.3</font></span><span >展开</span><span><font face="Times New Roman">Openfire</font></span><span >&mdash;&mdash;</span><span><font face="Times New Roman">build</font></span><span >文件夹</span><span><font face="Times New Roman">,</font></span><span >选择</span><span><font face="Times New Roman">build.xml,</font></span><span >点击</span><span><font face="Times New Roman">&quot;OK&quot;</font></span><span >；</span></p>
<p style="text-indent: 18pt; margin: 0cm 0cm 0pt 21pt" class="MsoNormal"><span><font face="Times New Roman">1.4</font></span><span >在</span><span><font face="Times New Roman">Ant</font></span><span >面板</span><span><font face="Times New Roman">,</font></span><span >展开</span><span><font face="Times New Roman">Spark,</font></span><span >双击</span><span><font face="Times New Roman">&quot;release&quot;</font></span><span >；</span></p>
<p style="text-indent: 18pt; margin: 0cm 0cm 0pt 21pt" class="MsoNormal"><span><font face="Times New Roman">1.5</font></span><span >等一段时间</span><span><font face="Times New Roman">,</font></span><span >会提示</span><span><font face="Times New Roman">&quot;Build Successful&quot;</font></span><span >；</span></p>
<p style="text-indent: 18pt; margin: 0cm 0cm 0pt 21pt" class="MsoNormal"><span><font face="Times New Roman">1.6</font></span><span >生成</span><span><font face="Times New Roman">target</font></span><span >、</span><span><font face="Times New Roman">work</font></span><span >文件夹，重新编译时，要手工删除此文件夹。</span></p>
<p style="margin: 0cm 0cm 0pt" class="MsoNormal"><span><span style="mso-tab-count: 1"><font face="Times New Roman">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  </font></span></span><span >注意：如果没有显示&ldquo;</span><span style="color: red"><font face="Times New Roman">Build Successful</font></span><span >&rdquo;，则再次双击&ldquo;</span><span style="color: red"><font face="Times New Roman">release</font></span><span >&rdquo;</span><span style="color: red"><font face="Times New Roman">.</font></span></p>
<p style="margin: 0cm 0cm 0pt" class="MsoNormal"><span >如下图所示：</span></p>
<p style="margin: 0cm 0cm 0pt" class="MsoNormal"><span ><span><img class="blogimg" border="0" small="0" src="http://hiphotos.baidu.com/dd_taiyangxue/pic/item/950c66a3db9ef6eecaefd00f.jpg"><br>
</span></span></p>
<p style="text-align: center; margin: 0cm 0cm 0pt" class="MsoNormal" align="center"> </p>
<h2 style="margin: 13pt 0cm"><span style="line-height: 173%; font-size: 10.5pt">2</span><span style="line-height: 173%;  font-size: 10.5pt; mso-ascii-">、配置</span><span style="line-height: 173%; font-size: 10.5pt">Openfire</span><span style="line-height: 173%;  font-size: 10.5pt; mso-ascii-">运行环境</span><span style="line-height: 173%; font-size: 10.5pt"></span></h2>
<p style="margin: 0cm 0cm 0pt 39pt" class="MsoNormal"><span><font face="Times New Roman">2.1</font></span><span >点击<span>Run</span>&mdash;&mdash;<span>Run Configurations</span></span></p>
<p style="text-indent: 18pt; margin: 0cm 0cm 0pt 21pt" class="MsoNormal"><span><font face="Times New Roman">2.2 </font></span><span >点击&ldquo;</span><span><font face="Times New Roman">Main</font></span><span >&rdquo;</span></p>
<p style="text-indent: 21pt; margin: 0cm 0cm 0pt 42pt" class="MsoNormal"><span><font face="Times New Roman">Name</font></span><span >填写：</span><span><font face="Times New Roman">Openfire</font></span></p>
<p style="text-indent: 21pt; margin: 0cm 0cm 0pt 42pt" class="MsoNormal"><span><font face="Times New Roman">Project</font></span><span >：</span><span><font face="Times New Roman">Openfire</font></span><span >（选择</span><span><font face="Times New Roman">Openfire</font></span><span >工程）</span></p>
<p style="text-indent: 21pt; margin: 0cm 0cm 0pt 42pt" class="MsoNormal"><span><font face="Times New Roman">Main class</font></span><span >：</span><span><font face="Times New Roman">org.jivesoftware.openfire.starter.ServerStarter</font></span><span >（启动类）</span></p>
<p style="text-indent: 21pt; margin: 0cm 0cm 0pt 42pt" class="MsoNormal"><span style=" font-size: 12pt; mso-font-kerning: 0pt; mso-bidi-">勾选<span>Stop in main</span></span></p>
<p style="text-indent: 21pt; margin: 0cm 0cm 0pt 42pt" class="MsoNormal"><span >如下图：</span></p>
<p style="text-indent: 21pt; margin: 0cm 0cm 0pt 42pt" class="MsoNormal"> </p>
<p style="text-indent: 21pt; margin: 0cm 0cm 0pt 42pt" class="MsoNormal"><span ><span><img class="blogimg" border="0" small="0" src="http://hiphotos.baidu.com/dd_taiyangxue/pic/item/9b850734269445c8a71e120a.jpg"><br>
</span></span></p>
<p style="margin: 0cm 0cm 0pt" class="MsoNormal"><span ></span></p>
<p><span >2.3 Arguments</span><span ><font face="宋体">页面，在</font></span><span >VM arguments</span><font face="宋体"><span >中加下内容，如下图：</span><span><font size="3"> -DopenfireHome=&quot;${workspace_loc:Openfire}/target/openfire&quot;</font></span></font></p>
<p><font face="宋体"><span><font size="3"><span><img class="blogimg" border="0" small="0" src="http://hiphotos.baidu.com/dd_taiyangxue/pic/item/7e558b6cce8b75b842169415.jpg"><br>
</span></font></span></font></p>
<p><span ></span></p>
<p style="margin: 0cm 0cm 0pt" class="MsoNormal"><span><font face="Times New Roman">2.4</font></span><span >点击</span><span><font face="Times New Roman">Classpath</font></span><span >标签页</span><span ></span></p>
<p style="text-indent: 21pt; margin: 0cm 0cm 0pt" class="MsoNormal"><span >选择</span><span><font face="Times New Roman">User Entries ,</font></span><span >使得</span><span><font face="Times New Roman">Advanced..</font></span><span >按钮变的可用</span><span><font face="Times New Roman">.</font></span><span >点击</span><span><font face="Times New Roman">Advanced</font></span><span >按钮</span><span><font face="Times New Roman">.</font></span><span >在弹出来的</span><span><font face="Times New Roman">Advanced Options</font></span><span >窗口</span><span><font face="Times New Roman">,</font></span><span >选择</span><span><font face="Times New Roman">Add Folders,</font></span><span >再点</span><span><font face="Times New Roman">OK, </font></span><span >在</span><span><font face="Times New Roman">Folder Selection</font></span><span >窗口选择</span><span><font face="Times New Roman">Openfire/src/i18n</font></span><span >文件夹，同样的方式选择</span><span><font face="Times New Roman">Openfire/src/resources</font></span><span >文件夹，点击</span><span><font face="Times New Roman">OK</font></span><span >。</span></p>
<p style="text-indent: 21pt; margin: 0cm 0cm 0pt" class="MsoNormal"><span ><span><img class="blogimg" border="0" small="0" src="http://hiphotos.baidu.com/dd_taiyangxue/pic/item/096615cda3ab4a5300e92817.jpg"><br>
</span></span></p>
<p style="margin: 0cm 0cm 0pt" class="MsoNormal"> </p>
<p style="margin: 0cm 0cm 0pt" class="MsoNormal"> </p>
<p style="margin: 0cm 0cm 0pt" class="MsoNormal"><span><font face="Times New Roman">2.5</font></span><span >选择</span><span><font face="Times New Roman">Common</font></span><span >标签页</span><span><font face="Times New Roman">,</font></span><span >勾选</span><span><font face="Times New Roman">Debug,Run</font></span><span >前面的框。点击</span><span><font face="Times New Roman">Apply,</font></span><span >再点击</span><span><font face="Times New Roman">Close</font></span><span >。</span><span style=" font-size: 12pt; mso-font-kerning: 0pt; mso-bidi-"></span></p>
<h2 style="margin: 13pt 0cm"><span style="line-height: 173%; font-size: 10.5pt">3</span><span style="line-height: 173%;  font-size: 10.5pt; mso-ascii-">、运行</span><span style="line-height: 173%; font-size: 10.5pt">Openfire</span></h2>
<p style="margin: 0cm 0cm 0pt 39pt" class="MsoNormal"><span><font face="Times New Roman">3.1</font></span><span >如下图</span></p>
<p style="margin: 0cm 0cm 0pt 39pt" class="MsoNormal"><span ><span><br>
<span > <span><span><span><img class="blogimg" border="0" small="0" src="http://hiphotos.baidu.com/dd_taiyangxue/pic/item/012cefef8ab6ffb8b3fb95b8.jpg"><br>
</span></span></span></span></span></span></p>
<p style="margin: 0cm 0cm 0pt" class="MsoNormal"> </p>
<p style="margin: 0cm 0cm 0pt" class="MsoNormal"><span><font face="Times New Roman"><span style="mso-tab-count: 1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  </span>3.2 </font></span><span >如下图，点击&ldquo;</span><span><font face="Times New Roman">run</font></span><span >&rdquo;运行</span><span><font face="Times New Roman">Openfire</font></span></p>
<p style="margin: 0cm 0cm 0pt" class="MsoNormal"><span><font face="Times New Roman"><span><span><span><img class="blogimg" border="0" small="0" src="http://hiphotos.baidu.com/dd_taiyangxue/pic/item/94a25dc5d4e084ea8326acc2.jpg"><br>
</span><br>
</span><br>
</span></font></span></p>
<p style="margin: 0cm 0cm 0pt" class="MsoNormal"> </p>
<p style="margin: 0cm 0cm 0pt" class="MsoNormal"><span >运行后，在控制台显示如下：</span></p>
<p style="text-align: left; margin: 0cm 0cm 0pt; mso-layout-grid-align: none" class="MsoNormal" align="left"><span >Openfire <st1:chsdate isrocdate="False" islunardate="False" day="30" month="12" year="1899">3.6.4</st1:chsdate> [Aug 17, 2010 8:59:32 PM]</span><span ></span></p>
<p style="margin: 0cm 0cm 0pt" class="MsoNormal"><span >Admin console listening at <a href="http://127.0.0.1:9090/"><font color="#800080">http://127.0.0.1:9090</font></a></span></p>
<h2 style="margin: 13pt 0cm"><a name="_四,配置Openfire"></a><span style="line-height: 173%; font-size: 10.5pt">4</span><span style="line-height: 173%;  font-size: 10.5pt; mso-ascii-">、运行</span><span style="line-height: 173%; font-size: 10.5pt">Openfire</span><span style="line-height: 173%;  font-size: 10.5pt; mso-ascii-">出现的错误，及解决方法</span><span style="line-height: 173%; font-size: 10.5pt"></span></h2>
<p style="margin: 0cm 0cm 0pt" class="MsoNormal"><span><font face="Times New Roman">4.1 </font></span><span >错误信息</span><span><span style="mso-tab-count: 1"><font face="Times New Roman"> </font></span></span></p>
<p style="margin: 0cm 0cm 0pt" class="MsoNormal"><span><span style="mso-tab-count: 1"><font face="Times New Roman">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span><img class="blogimg" border="0" small="0" src="http://hiphotos.baidu.com/dd_taiyangxue/pic/item/55b5baf27063bc880b46e0ce.jpg"><br>
</span></font></span></span></p>
<p style="margin: 0cm 0cm 0pt" class="MsoNormal"><span><font face="Times New Roman">4.2 </font></span><span >解决方法</span></p>
<p style="margin: 0cm 0cm 0pt" class="MsoNormal"><span><span style="mso-tab-count: 1"><font face="Times New Roman">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  </font></span></span><span >拷贝</span><span><font face="Times New Roman">src\i18n\openfire_i18n_en.properties</font></span><span >和</span><span><font face="Times New Roman">src\resources\jar\admin-sidebar.xml</font></span><span >到</span><span><font face="Times New Roman">openfire\bin</font></span><span >目录下。其中</span><span><font face="Times New Roman">openfire\bin</font></span><span >目录在</span><span><font face="Times New Roman">Eclipse</font></span><span >中无法看到，到源目录下操做。</span></p>
<h1 style="margin: 17pt 0cm 16.5pt"> </h1></div></body></html>