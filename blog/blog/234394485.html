<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>Spark源代码在Eclipse3.5.2中的部署、编译、运行</title></head><body><h1>Spark源代码在Eclipse3.5.2中的部署、编译、运行</h1><div><h1 style="margin: 17pt 0cm 16.5pt"><span>一、准备工作</span></h1>
<h2 style="margin: 13pt 0cm"><span style="line-height: 173%; font-size: 10.5pt">1</span><span style="line-height: 173%; font-size: 10.5pt">、到官方网站下载：</span><span style="line-height: 173%; font-size: 10.5pt">Openfire</span><span style="line-height: 173%; font-size: 10.5pt">（版本</span><st1:chsdate isrocdate="False" islunardate="False" day="30" month="12" year="1899"><span style="line-height: 173%; font-size: 10.5pt">3.6.4</span></st1:chsdate><span style="line-height: 173%; font-size: 10.5pt">）、</span><span style="line-height: 173%; font-size: 10.5pt">Spark</span><span style="line-height: 173%; font-size: 10.5pt">（版本</span><span style="line-height: 173%; font-size: 10.5pt">2.5.8</span><span style="line-height: 173%; font-size: 10.5pt">）、</span><span style="line-height: 173%; font-size: 10.5pt">Smack</span><span style="line-height: 173%; font-size: 10.5pt">（版本</span><span style="line-height: 173%; font-size: 10.5pt">3.1.0</span><span style="line-height: 173%; font-size: 10.5pt">），其中</span><span style="line-height: 173%; font-size: 10.5pt">Spark</span><span style="line-height: 173%; font-size: 10.5pt">只能使用</span><span style="line-height: 173%; font-size: 10.5pt">SVN</span><span style="line-height: 173%; font-size: 10.5pt">下载，源码的文件夹分别对应</span><span style="line-height: 173%; font-size: 10.5pt">Openfire</span><span style="line-height: 173%; font-size: 10.5pt">、</span><span style="line-height: 173%; font-size: 10.5pt">Spark</span><span style="line-height: 173%; font-size: 10.5pt">和</span><span style="line-height: 173%; font-size: 10.5pt">Smack</span><span style="line-height: 173%; font-size: 10.5pt">。</span></h2>
<h2 style="margin: 13pt 0cm"><span style="line-height: 173%; font-size: 10.5pt">2</span><span style="line-height: 173%; font-size: 10.5pt">、网址：</span><span style="line-height: 173%; font-size: 10.5pt"><a href="http://www.igniterealtime.org/downloads/source.jsp"><span style="color: windowtext; text-decoration: none">http://www.igniterealtime.org/downloads/source.jsp</span></a></span><span style="line-height: 173%; font-size: 10.5pt">，界面显示如下图：</span></h2>
<h2 style="margin: 13pt 0cm"><span style="line-height: 173%; font-size: 10.5pt"><span><img class="blogimg" border="0" small="0" src="http://hiphotos.baidu.com/dd_taiyangxue/pic/item/ceeb832b258cba7b5243c1b5.jpg"><br>
</span></span></h2>
<p style="text-align: center; margin: 0cm 0cm 0pt" class="MsoNormal" align="center"> </p>
<h1 style="margin: 17pt 0cm 16.5pt"><span>二、创建</span><span style="line-height: 240%; font-size: 14pt"><font face="Times New Roman">Java Project</font></span><span>项目&mdash;&mdash;</span><span style="line-height: 240%; font-size: 14pt"><font face="Times New Roman">Spark</font></span></h1>
<h2 style="margin: 13pt 0cm"><span style="line-height: 173%; font-size: 10.5pt">1</span><span style="line-height: 173%; font-size: 10.5pt">、使用</span><span style="line-height: 173%; font-size: 10.5pt">Eclipse-<st1:chsdate isrocdate="False" islunardate="False" day="30" month="12" year="1899">3.5.2</st1:chsdate></span></h2>
<h2 style="margin: 13pt 0cm"><span style="line-height: 173%; font-size: 10.5pt">2</span><span style="line-height: 173%; font-size: 10.5pt">、选择</span><span style="line-height: 173%; font-size: 10.5pt">File&mdash;&mdash;New&mdash;&mdash;Project&mdash;&mdash;Java Project</span><span style="line-height: 173%; font-size: 10.5pt">。输入项目工程名</span><span style="line-height: 173%; font-size: 10.5pt">Spark</span><span style="line-height: 173%; font-size: 10.5pt">，</span><span style="line-height: 173%; font-size: 10.5pt">Contents</span><span style="line-height: 173%; font-size: 10.5pt">中选择</span><span style="line-height: 173%; font-size: 10.5pt"> &quot;Create project from existiing source&quot;,</span><span style="line-height: 173%; font-size: 10.5pt">然后把</span><span style="line-height: 173%; font-size: 10.5pt">spark</span><span style="line-height: 173%; font-size: 10.5pt">文件所在的文件夹加进去。如下图所示：</span></h2>
<h2 style="margin: 13pt 0cm"><span style="line-height: 173%; font-size: 10.5pt"><span><img class="blogimg" border="0" small="0" src="http://hiphotos.baidu.com/dd_taiyangxue/pic/item/fd0ffcecbda02197b21cb1b0.jpg"><br>
</span></span></h2>
<p style="margin: 0cm 0cm 0pt" class="MsoNormal"> </p>
<h2 style="margin: 13pt 0cm"><span style="line-height: 173%; font-size: 10.5pt">3</span><span style="line-height: 173%; font-size: 10.5pt">、点击&ldquo;</span><span style="line-height: 173%; font-size: 10.5pt">Finish</span><span style="line-height: 173%; font-size: 10.5pt">&rdquo;，完成。</span></h2>
<h2 style="margin: 13pt 0cm"><span style="line-height: 173%; font-size: 10.5pt">4</span><span style="line-height: 173%; font-size: 10.5pt">、在</span><span style="line-height: 173%; font-size: 10.5pt">Eclipse</span><span style="line-height: 173%; font-size: 10.5pt">的</span><span style="line-height: 173%; font-size: 10.5pt">Package Explorer</span><span style="line-height: 173%; font-size: 10.5pt">中的显示如下图所示：</span></h2>
<h2 align="left"><span style="line-height: 173%; font-size: 10.5pt"><span><img class="blogimg" border="0" small="0" src="http://hiphotos.baidu.com/dd_taiyangxue/pic/item/2d6ad4d85b06fd6f10df9bb2.jpg"></span></span></h2>
<h2 align="center"> </h2>
<h2 style="text-align: center; margin: 0cm 0cm 0pt" class="MsoNormal" align="center"> </h2>
<h2 style="margin: 0cm 0cm 0pt" class="MsoNormal" align="left"><span>特别注意：完成</span><span style="color: red"><font face="Times New Roman">Spark</font></span><span>工程后，会产生编译错误，删除有错误的文件夹或包。</span></h2>
<h1 style="margin: 17pt 0cm 16.5pt" align="left"><span>三、生成、编译、运行</span><span style="line-height: 240%; font-size: 14pt"><font face="Times New Roman">Spark</font></span></h1>
<h2 style="margin: 13pt 0cm" align="left"><span style="line-height: 173%; font-size: 10.5pt">1</span><span style="line-height: 173%; font-size: 10.5pt">、生成</span><span style="line-height: 173%; font-size: 10.5pt">Spark</span></h2>
<h2 style="text-indent: 18pt; margin: 0cm 0cm 0pt 21pt" class="MsoNormal" align="left"><span><font face="Times New Roman">1.1</font></span><span>点击</span><span><font face="Times New Roman">Window</font></span><span>&mdash;&mdash;</span><span><font face="Times New Roman">Show View</font></span><span>&mdash;&mdash;</span><span><font face="Times New Roman">Ant</font></span><span>；</span></h2>
<h2 style="text-indent: 18pt; margin: 0cm 0cm 0pt 21pt" class="MsoNormal" align="left"><span><font face="Times New Roman">1.2</font></span><span>右击</span><span><font face="Times New Roman">Ant</font></span><span>面板</span><span><font face="Times New Roman">,</font></span><span>选择</span><span><font face="Times New Roman">Add Buildfiles</font></span><span>；</span></h2>
<h2 style="text-indent: 18pt; margin: 0cm 0cm 0pt 21pt" class="MsoNormal" align="left"><span><font face="Times New Roman">1.3</font></span><span>展开</span><span><font face="Times New Roman">Spark</font></span><span>&mdash;&mdash;</span><span><font face="Times New Roman">build</font></span><span>文件夹</span><span><font face="Times New Roman">,</font></span><span>选择</span><span><font face="Times New Roman">build.xml,</font></span><span>点击</span><span><font face="Times New Roman">&quot;OK&quot;</font></span><span>；</span></h2>
<h2 style="text-indent: 18pt; margin: 0cm 0cm 0pt 21pt" class="MsoNormal" align="left"><span><font face="Times New Roman">1.4</font></span><span>在</span><span><font face="Times New Roman">Ant</font></span><span>面板</span><span><font face="Times New Roman">,</font></span><span>展开</span><span><font face="Times New Roman">Spark,</font></span><span>双击</span><span><font face="Times New Roman">&quot;release[default]&quot;</font></span><span>；</span></h2>
<h2 style="text-indent: 18pt; margin: 0cm 0cm 0pt 21pt" class="MsoNormal" align="left"><span><font face="Times New Roman">1.5</font></span><span>等一段时间</span><span><font face="Times New Roman">,</font></span><span>会提示</span><span><font face="Times New Roman">&quot;Build Successful&quot;</font></span><span>。</span></h2>
<p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong> <font size="5">1.6</font></strong></span><strong><font size="5"><span>生成</span><span>target</span><span>文件夹，重新编译时，要手工删除此文件夹。</span></font></strong></p>
<h2 style="margin: 0cm 0cm 0pt" class="MsoNormal" align="left"><span><span style="mso-tab-count: 1"><font face="Times New Roman">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  </font></span></span><span>注意：如果没有显示&ldquo;</span><span style="color: red"><font face="Times New Roman">Build Successful</font></span><span>&rdquo;，则再次双击&ldquo;</span><span style="color: red"><font face="Times New Roman">release[default]</font></span><span>&rdquo;</span><span style="color: red"><font face="Times New Roman">.</font></span></h2>
<h2 style="margin: 0cm 0cm 0pt" class="MsoNormal" align="left"><span>如下图所示：</span></h2>
<h2 style="margin: 0cm 0cm 0pt" class="MsoNormal" align="left"><span><span><img class="blogimg" border="0" small="0" src="http://hiphotos.baidu.com/dd_taiyangxue/pic/item/ee86c6ce781f357ef9dc61bc.jpg"><br>
</span></span>
<h2 style="text-align: center; margin: 0cm 0cm 0pt" class="MsoNormal" align="left"> </h2>
<h2 style="margin: 13pt 0cm" align="left"><span style="line-height: 173%; font-size: 10.5pt">2</span><span style="line-height: 173%; font-size: 10.5pt">、配置</span><span style="line-height: 173%; font-size: 10.5pt">Spark</span><span style="line-height: 173%; font-size: 10.5pt">运行环境</span></h2>
<h2 style="margin: 0cm 0cm 0pt 39pt" class="MsoNormal" align="left"><span><font face="Times New Roman">2.1</font></span><span>点击<span>Run</span>&mdash;&mdash;<span>Run Configurations</span></span></h2>
<h2 style="text-indent: 18pt; margin: 0cm 0cm 0pt 21pt" class="MsoNormal" align="left"><span><font face="Times New Roman">2.2 </font></span><span>点击&ldquo;</span><span><font face="Times New Roman">Main</font></span><span>&rdquo;</span></h2>
<h2 style="text-indent: 21pt; margin: 0cm 0cm 0pt 42pt" class="MsoNormal" align="left"><span><font face="Times New Roman">Name</font></span><span>填写：</span><span><font face="Times New Roman">Spark</font></span></h2>
<h2 style="text-indent: 21pt; margin: 0cm 0cm 0pt 42pt" class="MsoNormal" align="left"><span><font face="Times New Roman">Project</font></span><span>：</span><span><font face="Times New Roman">Spark</font></span><span>（选择</span><span><font face="Times New Roman">Spark</font></span><span>工程）</span></h2>
<h2 style="text-indent: 21pt; margin: 0cm 0cm 0pt 42pt" class="MsoNormal" align="left"><span><font face="Times New Roman">Main class</font></span><span>：</span><span><font face="Times New Roman">org.jivesoftware.launcher.Startup</font></span><span>（启动类）</span></h2>
<h2 style="text-indent: 21pt; margin: 0cm 0cm 0pt 42pt" class="MsoNormal" align="left"><span style="font-size: 12pt; mso-font-kerning: 0pt">勾选<span>Stop in main</span></span></h2>
<h2 style="text-indent: 21pt; margin: 0cm 0cm 0pt 42pt" class="MsoNormal" align="left"><span>如下图：</span></h2>
<h2 style="text-indent: 21pt; margin: 0cm 0cm 0pt 42pt" class="MsoNormal" align="left"><span><span><img class="blogimg" border="0" small="0" src="http://hiphotos.baidu.com/dd_taiyangxue/pic/item/95aa251259a760c36438dbbe.jpg"><br>
</span></span>
<h2 style="margin: 0cm 0cm 0pt" class="MsoNormal" align="left"> </h2>
<h2 style="margin: 0cm 0cm 0pt" class="MsoNormal" align="left"><span><span style="mso-tab-count: 1">&nbsp;&nbsp;&nbsp;  </span>2.3</span><span style="font-size: 12pt; mso-font-kerning: 0pt">点击<span>Classpath</span>标签页</span></h2>
<h2 style="text-indent: 21pt; margin: 0cm 0cm 0pt 21pt" class="MsoNormal" align="left"><span style="font-size: 12pt; mso-font-kerning: 0pt">选择<span>User Entries ,</span>使得<span>Advanced..</span>按钮变的可用</span><span>.</span><span style="font-size: 12pt; mso-font-kerning: 0pt">点击<span>Advanced</span>按钮</span><span>.</span><span style="font-size: 12pt; mso-font-kerning: 0pt">在弹出来的<span>Advanced Options</span>窗口</span><span>,</span><span style="font-size: 12pt; mso-font-kerning: 0pt">选择<span>Add Folders,</span>再点<span>OK,</span>在<span>Folder Selection</span>窗口选择<span>spark::src::resources </span>文件夹</span><span>,</span><span style="font-size: 12pt; mso-font-kerning: 0pt">点击<span>OK<br>
2.4</span>选择<span>Common</span>标签页</span><span>,</span><span style="font-size: 12pt; mso-font-kerning: 0pt">勾选<span>Debug,Run</span>前面的框</span><span>。</span><span style="font-size: 12pt; mso-font-kerning: 0pt">点击<span>Apply,</span>再点击<span>Close</span>。</span></h2>
<h2 style="margin: 13pt 0cm" align="left"><span style="line-height: 173%; font-size: 10.5pt">3</span><span style="line-height: 173%; font-size: 10.5pt">、运行</span><span style="line-height: 173%; font-size: 10.5pt">Spark</span></h2>
<h2 style="margin: 0cm 0cm 0pt 39pt" class="MsoNormal" align="left"><span><font face="Times New Roman">3.1</font></span><span>如下图</span></h2>
<h2 style="margin: 0cm 0cm 0pt 39pt" class="MsoNormal" align="left"><span><span><img class="blogimg" border="0" small="0" src="http://hiphotos.baidu.com/dd_taiyangxue/pic/item/012cefef8ab6ffb8b3fb95b8.jpg"><br>
</span></span>
<h2 style="margin: 0cm 0cm 0pt" class="MsoNormal" align="left"> </h2>
<h2 style="margin: 0cm 0cm 0pt" class="MsoNormal" align="left"><span><font face="Times New Roman"><span style="mso-tab-count: 1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  </span>3.2 </font></span><span>如下图，点击&ldquo;</span><span><font face="Times New Roman">run</font></span><span>&rdquo;运行</span><span><font face="Times New Roman">Spark</font></span></h2>
<h2 style="margin: 0cm 0cm 0pt" class="MsoNormal" align="left"><span><span><img class="blogimg" border="0" small="0" src="http://hiphotos.baidu.com/dd_taiyangxue/pic/item/b5e367089a0336c1d0581bb9.jpg"><br>
</span></span>
<h2 align="left"> </h2>
<h2 style="margin: 13pt 0cm"> </h2>
</h2>
</h2>
</h2>
</h2></div></body></html>