<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>Linux系统上的Cisco VPN安装配置</title></head><body><h1>Linux系统上的Cisco VPN安装配置</h1><div><p><strong><span style="FONT-SIZE: 16px">一、下载Cisco VPN客户端</span></strong></p>
<p>下载地址1：<a href="http://projects.tuxx-home.at/ciscovpn/clients/linux/">http://projects.tuxx-home.at/ciscovpn/clients/linux/</a></p>
<p>vpnclient-linux-x86_64-4.8.00.0490-k9.tar.gz</p>
<p><strong><span style="FONT-SIZE: 16px">二、解压缩 vpnclient-linux-4.0.5.Rel-k9.tar.gz 缺省得到 vpnclient 目录</span></strong></p>
<p>tar -zxvf vpnclient-linux-4.0.5.Rel-k9.tar.gz </p>
<p><strong><span style="FONT-SIZE: 16px">三、安装</span></strong></p>
<p>运行 ./vpn_install</p>
<p>输出信息如下:</p>
<p>Cisco Systems VPN Client Version 4.8.00 (0490) Linux Installer<br>Copyright (C) 1998-2005 Cisco Systems, Inc. All Rights Reserved.</p>
<p>By installing this product you agree that you have read the<br>license.txt file (The VPN Client license) and will comply with<br>its terms. </p>
<p><br>Directory where binaries will be installed [/usr/local/bin]</p>
<p>Automatically start the VPN service at boot time [yes]yes</p>
<p>In order to build the VPN kernel module, you must have the<br>kernel headers for the version of the kernel you are running.</p>
<p><br>Directory containing linux kernel source code [/lib/modules/2.6.18-164.el5/build]</p>
<p>* Binaries will be installed in "/usr/local/bin".<br>* Modules will be installed in "/lib/modules/2.6.18-164.el5/CiscoVPN".<br>* The VPN service will be started AUTOMATICALLY at boot time.<br>* Kernel source from "/lib/modules/2.6.18-164.el5/build" will be used to build the module.</p>
<p>Is the above correct [y]y</p>
<p>Making module<br>make -C /lib/modules/2.6.18-164.el5/build SUBDIRS=/home/dibin/vpnclient modules<br>make[1]: Entering directory `/usr/src/kernels/2.6.18-164.el5-i686'<br>&nbsp; CC [M]&nbsp; /home/dibin/vpnclient/linuxcniapi.o<br>?ㄥ.?.. /home/dibin/vpnclient/linuxcniapi.c锛.2 ?..浠朵腑:<br>include/linux/config.h:6:2: 璀?.锛.warning Including config.h is deprecated.<br>&nbsp; CC [M]&nbsp; /home/dibin/vpnclient/frag.o<br>?ㄥ.?.. /home/dibin/vpnclient/frag.c锛. ?..浠朵腑:<br>include/linux/config.h:6:2: 璀?.锛.warning Including config.h is deprecated.<br>&nbsp; CC [M]&nbsp; /home/dibin/vpnclient/IPSecDrvOS_linux.o<br>?ㄥ.?.. /home/dibin/vpnclient/IPSecDrvOS_linux.c锛.4 ?..浠朵腑:<br>include/linux/config.h:6:2: 璀?.锛.warning Including config.h is deprecated.<br>&nbsp; CC [M]&nbsp; /home/dibin/vpnclient/interceptor.o<br>?ㄥ.?.. /home/dibin/vpnclient/interceptor.c锛.1 ?..浠朵腑:<br>include/linux/config.h:6:2: 璀?.锛.warning Including config.h is deprecated.<br>/home/dibin/vpnclient/interceptor.c: In function ?.andle_vpnup?.<br>/home/dibin/vpnclient/interceptor.c:310: 璀?.锛.?涓..瀹圭.?..绫诲.璧.&#128;<br>/home/dibin/vpnclient/interceptor.c:334: 璀?.锛.?涓..瀹圭.?..绫诲.璧.&#128;<br>/home/dibin/vpnclient/interceptor.c:335: 璀?.锛.?涓..瀹圭.?..绫诲.璧.&#128;<br>/home/dibin/vpnclient/interceptor.c: In function ?.o_cleanup?.<br>/home/dibin/vpnclient/interceptor.c:378: 璀?.锛.?涓..瀹圭.?..绫诲.璧.&#128;<br>&nbsp; CC [M]&nbsp; /home/dibin/vpnclient/linuxkernelapi.o<br>&nbsp; LD [M]&nbsp; /home/dibin/vpnclient/cisco_ipsec.o<br>&nbsp; Building modules, stage 2.<br>&nbsp; MODPOST<br>WARNING: /home/dibin/vpnclient/cisco_ipsec.o - Section mismatch: reference to .init.text: from .data between 'interceptor_dev' (at offset 0xb4) and 'interceptor_notifier'<br>WARNING: could not find /home/dibin/vpnclient/.libdriver.so.cmd for /home/dibin/vpnclient/libdriver.so<br>&nbsp; CC&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /home/dibin/vpnclient/cisco_ipsec.mod.o<br>&nbsp; LD [M]&nbsp; /home/dibin/vpnclient/cisco_ipsec.ko<br>make[1]: Leaving directory `/usr/src/kernels/2.6.18-164.el5-i686'<br>Create module directory "/lib/modules/2.6.18-164.el5/CiscoVPN".<br>Copying module to directory "/lib/modules/2.6.18-164.el5/CiscoVPN".<br>Already have group 'bin'</p>
<p>Creating start/stop script "/etc/init.d/vpnclient_init".<br>&nbsp;&nbsp;&nbsp; /etc/init.d/vpnclient_init<br>Enabling start/stop script for run level 3,4 and 5.<br>Creating global config /etc/opt/cisco-vpnclient</p>
<p>Installing license.txt (VPN Client license) in "/opt/cisco-vpnclient/":</p>
<p>Installing bundled user profiles in "/etc/opt/cisco-vpnclient/Profiles/":<br>* New Profiles&nbsp;&nbsp;&nbsp;&nbsp; : sample </p>
<p>Copying binaries to directory "/opt/cisco-vpnclient/bin".<br>Adding symlinks to "/usr/local/bin".<br>&nbsp;&nbsp;&nbsp; /opt/cisco-vpnclient/bin/vpnclient<br>&nbsp;&nbsp;&nbsp; /opt/cisco-vpnclient/bin/cisco_cert_mgr<br>&nbsp;&nbsp;&nbsp; /opt/cisco-vpnclient/bin/ipseclog<br>Copying setuid binaries to directory "/opt/cisco-vpnclient/bin".<br>&nbsp;&nbsp;&nbsp; /opt/cisco-vpnclient/bin/cvpnd<br>Copying libraries to directory "/opt/cisco-vpnclient/lib".<br>&nbsp;&nbsp;&nbsp; /opt/cisco-vpnclient/lib/libvpnapi.so<br>Copying header files to directory "/opt/cisco-vpnclient/include".<br>&nbsp;&nbsp;&nbsp; /opt/cisco-vpnclient/include/vpnapi.h</p>
<p>Setting permissions.<br>&nbsp;&nbsp;&nbsp; /opt/cisco-vpnclient/bin/cvpnd (setuid root)<br>&nbsp;&nbsp;&nbsp; /opt/cisco-vpnclient (group bin readable)<br>&nbsp;&nbsp;&nbsp; /etc/opt/cisco-vpnclient (group bin readable)<br>&nbsp;&nbsp;&nbsp; /etc/opt/cisco-vpnclient/Profiles (group bin readable)<br>&nbsp;&nbsp;&nbsp; /etc/opt/cisco-vpnclient/Certificates (group bin readable)<br>* You may wish to change these permissions to restrict access to root.<br>* You must run "/etc/init.d/vpnclient_init start" before using the client.<br>* This script will be run AUTOMATICALLY every time you reboot your computer.</p>
<p>&nbsp;</p>
<p><strong><span style="FONT-SIZE: 16px">四、启动VPN客户端</span></strong></p>
<p>/etc/init.d/vpnclient_init start&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 或者：restart/stop</p>
<p><strong><span style="FONT-SIZE: 16px">五、编辑/etc/opt/cisco-vpnclient/Profiles/目录下的pcf配置文件</span></strong></p>
<p>内容如下：</p>
<p>[main]<br>Description=client<br>Host=ip地址<br>AuthType=1<br>GroupName=*******<br>GroupPwd=<br>enc_GroupPwd=</p>
<p>EnableISPConnect=0<br>ISPConnectType=0<br>ISPConnect=<br>ISPPhonebook=<br>ISPCommand=<br>Username=*****<br>SaveUserPassword=0<br>UserPassword=<br>enc_UserPassword=<br>NTDomain=<br>EnableBackup=0<br>BackupServer=<br>EnableMSLogon=1<br>MSLogonType=0<br>EnableNat=1<br>TunnelingMode=0<br>TcpTunnelingPort=10000<br>CertStore=0<br>CertName=<br>CertPath=<br>CertSubjectName=<br>CertSerialHash=00000000000000000000000000000000<br>SendCertChain=0<br>PeerTimeout=90<br>EnableLocalLAN=0</p>
<p><strong><span style="FONT-SIZE: 16px">六、连接、断开VPN</span></strong></p>
<p>vpnclient connect &lt;配置文件名称&gt;</p>
<p>vpnclient disconnect</p>
<p><strong><span style="BACKGROUND-COLOR: #ffffff; COLOR: #ff0000">备注：安装完VPN需要重启后生效：/etc/init.d/vpnclient_init restart</span></strong></p></div></body></html>