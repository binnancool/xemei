<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>Tomcat多端口、多虚拟目录、默认首页的设置</title><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- top1 -->
<ins class="adsbygoogle"
     style="display:inline-block;width:728px;height:90px"
     data-ad-client="ca-pub-3347102627476643"
     data-ad-slot="2352128818"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script></head><body><h1>Tomcat多端口、多虚拟目录、默认首页的设置</h1><div><p>在$tomcat/webapps/下建myjsp目录作为网站的默认目录，在myjsp中有一个a.jsp文件，该文件作为网站的默认主页。<br><strong><span style="COLOR: #ff0000; FONT-SIZE: 16px">一、首先，修改$tomcat/conf/server.xml文件：</span></strong><br>在server.xml文件中，有一段如下：<br>……<br>&lt;engine name="Catalina" defaultHost="localhost"&gt;<br>&lt;host name="localhost" appBase="webapps"<br>unpackWARs="true" autoDeploy="true"<br>xmlValidation="false" xmlNamespaceAware="false"&gt;<br>……<br>&lt;host&gt;<br>&lt; /engine&gt;<br>……<br>在&lt;host&gt;&lt;/host&gt;标签之间添加上：<br><br><strong><span style="COLOR: #ff0000">&lt;Context path="" docBase="myjsp" debug="0" reloadable="true" /&gt;</span></strong><br><br>path是说明虚拟目录的名字，如果你要只输入ip地址就显示主页，则该键值留为空；<br><br>docBase是虚拟目录的路径，它默认的是$tomcat/webapps/ROOT目录，现在我在webapps目录下建了一个myjsp目录，让该目录作为我的默认目录。<br><br>debug和reloadable一般都分别设置成0和true。<br><br><strong><span style="COLOR: #ff0000; FONT-SIZE: 16px">二、修改$tomcat/conf/web.xml文件</span></strong><br>在web.xml文件中，有一段如下：<br>&lt;welcome-file-list&gt;<br>&lt;welcome-file&gt;index.html&lt;/welcome-file&gt;<br>&lt;welcome-file&gt;index.htm&lt;/welcome-file&gt;<br>&lt;welcome-file&gt;index.jsp&lt;/welcome-file&gt;<br>&lt;/welcome-file-list&gt;<br>在&lt;welcome-file-list&gt;与&lt;welcome-file&gt;index.html&lt;/welcome-file&gt;之间添加上：<br><br>&lt;welcome-file&gt;a.jsp&lt;/welcome-file&gt;</p>
<p><strong><span style="FONT-SIZE: 16px">三、让tomcat监听多个端口</span></strong></p>
<div>
<div>
<div>Xml代码：</div></div><span><span>&lt;</span><span>Connector</span><span></span><span>port</span><span>=</span><span>"8081"</span><span></span><span>protocol</span><span>=</span><span>"HTTP/1.1"</span><span></span></span><span><span>connectionTimeout</span><span>=</span><span>"20000"</span><span></span></span><span><span>redirectPort</span><span>=</span><span>"8443"</span><span></span><span>/&gt;</span><span></span></span><span></span><span><span>&lt;</span><span>Connector</span><span></span><span>port</span><span>=</span><span>"8082"</span><span></span><span>protocol</span><span>=</span><span>"HTTP/1.1"</span><span></span></span><span><span>connectionTimeout</span><span>=</span><span>"20000"</span><span></span></span><span><span>redirectPort</span><span>=</span><span>"8443"</span><span></span><span>/&gt;</span><span></span></span></div>
<p>&lt;Connector port="8081" protocol="HTTP/1.1" connectionTimeout="20000" redirectPort="8443" /&gt; &lt;Connector port="8082" protocol="HTTP/1.1" connectionTimeout="20000" redirectPort="8443" /&gt; </p>
<p></p>
<p>只需填加一个Connector就可以了。</p>
<p></p>
<p>但这种方法有一个缺点是，两个端口处理的东西是一样的，也就是访问8081和8082的内容是一样的。这种适合需要使用指定模个端口的情况。</p>
<p><strong><span style="COLOR: #ff0000; FONT-SIZE: 16px">四、一个为不同域名服务</span></strong></p>
<p></p>
<div>
<div>Xml代码：</div></div>
<div><span><span>&lt;</span><span>Engine</span><span></span><span>name</span><span>=</span><span>"Catalina"</span><span></span><span>defaultHost</span><span>=</span><span>"localhost"</span><span>&gt;</span><span></span></span><span></span><span><span>&lt;</span><span>Realm</span><span></span><span>className</span><span>=</span><span>"org.apache.catalina.realm.UserDatabaseRealm"</span><span></span></span><span><span>resourceName</span><span>=</span><span>"UserDatabase"</span><span>/&gt;</span><span></span></span><span></span><span><span></span></span></div>
<div><strong><span><span>&lt;</span><span>Host</span><span></span><span>name</span><span>=</span><span>"localhost"</span><span></span><span>appBase</span><span>=</span><span>"webapps"</span><span></span></span><span><span>unpackWARs</span><span>=</span><span>"true"</span><span></span><span>autoDeploy</span><span>=</span><span>"true"</span><span></span></span><span><span>xmlValidation</span><span>=</span><span>"false"</span><span></span><span>xmlNamespaceAware</span><span>=</span><span>"false"</span><span>&gt;</span><span></span></span><span><span>&lt;/</span><span>Host</span><span>&gt;</span></span></strong><span></span><span><span></span></span></div>
<div><strong><span><span>&lt;</span><span>Host</span><span></span><span>name</span><span>=</span><span>"www.java.com"</span><span></span><span>appBase</span><span>=</span><span>"webapps2"</span><span></span></span><span><span>unpackWARs</span><span>=</span><span>"true"</span><span></span><span>autoDeploy</span><span>=</span><span>"true"</span><span></span></span><span><span>xmlValidation</span><span>=</span><span>"false"</span><span></span><span>xmlNamespaceAware</span><span>=</span><span>"false"</span><span>&gt;</span><span></span></span><span><span>&lt;/</span><span>Host</span><span>&gt;</span></span></strong><span><span></span></span></div>
<div><span><span>&lt;/</span><span>Engine</span><span>&gt;</span></span>&nbsp;</div>
<p>只需填加一个Host就可以了，appBase需要使用另外一个目录。这样不同域名，访问不同目录。</p>
<p><strong><span style="COLOR: #ff0000; FONT-SIZE: 16px">五、多端口，多应用</span></strong></p>
<p><strong><span style="COLOR: #ff0000; FONT-SIZE: 16px">在&lt;/Service&gt;下添加如下代码：启动一个8080端口的web网站，加上一个80端口的web网站，即8080端口和80端口对应不同的web网站</span></strong></p>
<p><span style="BACKGROUND-COLOR: rgb(153,153,153)"><span style="BACKGROUND-COLOR: rgb(204,255,204)">&lt;Service name="Fantasysoft"&gt; <br>&lt;Connector acceptCount="100" connectionTimeout="20000" disableUploadTimeout="true" port="<strong>8080</strong>" redirectPort="8453" maxSpareThreads="75" maxThreads="150" minSpareThreads="25"/&gt; <br>&lt;Connector port="8019" protocol="AJP/1.3" protocolHandlerClassName="org.apache.jk.server.JkCoyoteHandler" redirectPort="8453"/&gt; <br>&lt;Engine defaultHost="localhost" name="Catalina"&gt; <br>&lt;Host appBase="webapps2" name="localhost"&gt; </span></span></p>
<p><strong><span style="BACKGROUND-COLOR: rgb(153,153,153)"><span style="BACKGROUND-COLOR: rgb(204,255,204)">&lt;Context&nbsp;&nbsp; path=""&nbsp;&nbsp; docBase="DownLoadMonitor"&nbsp;&nbsp; debug="0"&nbsp;&nbsp; reloadable="true"&nbsp;&nbsp; /&gt; 默认的网站设置</span></span></strong><span style="BACKGROUND-COLOR: rgb(153,153,153)"><span style="BACKGROUND-COLOR: rgb(204,255,204)"><br>&lt;Logger className="org.apache.catalina.logger.FileLogger" prefix="localhost_log." suffix=".txt" timestamp="true"/&gt; <br>&lt;/Host&gt; <br>&lt;Logger className="org.apache.catalina.logger.FileLogger" prefix="catalina_log." suffix=".txt" timestamp="true"/&gt; <br>&lt;Realm className="org.apache.catalina.realm.UserDatabaseRealm"/&gt; <br>&lt;/Engine&gt; <br>&lt;/Service&gt; <br></p></span></span>
<p><br>&nbsp;</p></div></body></html>